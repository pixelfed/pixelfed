(self.webpackChunkpixelfed=self.webpackChunkpixelfed||[]).push([[1768],{5364:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>r});var o=e(19755);function n(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,a){if(!t)return;if("string"==typeof t)return s(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s(t,a)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,o=new Array(a);e<a;e++)o[e]=t[e];return o}const r={data:function(){return{notifications:{},notificationCursor:2,notificationMaxId:0}},mounted:function(){this.fetchNotifications()},updated:function(){o('[data-toggle="tooltip"]').tooltip()},methods:{fetchNotifications:function(){var t=this;axios.get("/api/pixelfed/v1/accounts/verify_credentials").then((function(t){window._sharedData.curUser=t.data,window.App.util.navatar()})),axios.get("/api/pixelfed/v1/notifications?pg=true").then((function(a){var e=a.data.filter((function(t){return!("share"==t.type&&!t.status)&&(!("comment"==t.type&&!t.status)&&(!("mention"==t.type&&!t.status)&&(!("favourite"==t.type&&!t.status)&&!("follow"==t.type&&!t.account))))})),s=a.data.map((function(t){return t.id}));t.notificationMaxId=Math.max.apply(Math,n(s)),t.notifications=e,o(".notification-card .loader").addClass("d-none"),o(".notification-card .contents").removeClass("d-none")}))},infiniteNotifications:function(t){var a=this;this.notificationCursor>10?t.complete():axios.get("/api/pixelfed/v1/notifications",{params:{max_id:this.notificationMaxId}}).then((function(e){if(e.data.length){var o,s=e.data.filter((function(t){return!("share"==t.type&&!t.status)&&(!("comment"==t.type&&!t.status)&&(!("mention"==t.type&&!t.status)&&(!("favourite"==t.type&&!t.status)&&(!("follow"==t.type&&!t.account)&&!_.find(a.notifications,{id:t.id})))))})),r=s.map((function(t){return t.id}));a.notificationMaxId=Math.max.apply(Math,n(r)),(o=a.notifications).push.apply(o,n(s)),a.notificationCursor++,t.loaded()}else t.complete()}))},truncate:function(t){return t.length<=15?t:t.slice(0,15)+"..."},timeAgo:function(t){var a=Date.parse(t),e=Math.floor((new Date-a)/1e3),o=Math.floor(e/31536e3);return o>=1?o+"y":(o=Math.floor(e/604800))>=1?o+"w":(o=Math.floor(e/86400))>=1?o+"d":(o=Math.floor(e/3600))>=1?o+"h":(o=Math.floor(e/60))>=1?o+"m":Math.floor(e)+"s"},mentionUrl:function(t){return"/p/"+t.account.username+"/"+t.id},followProfile:function(t){var a=this,e=t.account.id;axios.post("/i/follow",{item:e}).then((function(t){a.notifications.map((function(t){t.account.id===e&&(t.relationship.following=!0)}))})).catch((function(t){t.response.data.message&&swal("Error",t.response.data.message,"error")}))},viewContext:function(t){switch(t.type){case"follow":return t.account.url;case"mention":case"like":case"favourite":case"comment":return t.status.url;case"tagged":return t.tagged.post_url;case"direct":return"/account/direct/t/"+t.account.id}return"/"},getProfileUrl:function(t){return 1==t.local?t.url:"/i/web/profile/_/"+t.id},getPostUrl:function(t){return 1==t.local?t.url:"/i/web/post/_/"+t.account.id+"/"+t.id}}}},69258:(t,a,e)=>{"use strict";e.r(a),e.d(a,{render:()=>o,staticRenderFns:()=>n});var o=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"row my-5"},[a("div",{staticClass:"col-12 col-md-8 offset-md-2"},[t._l(t.notifications,(function(e,o){return t.notifications.length>0?a("div",{staticClass:"media mb-3 align-items-center px-3 border-bottom pb-3"},[a("img",{staticClass:"mr-2 rounded-circle",staticStyle:{border:"1px solid #ccc"},attrs:{src:e.account.avatar,alt:"",width:"32px",height:"32px"}}),t._v(" "),a("div",{staticClass:"media-body font-weight-light"},["favourite"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),"data-placement":"bottom","data-toggle":"tooltip",title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" liked your "),a("a",{staticClass:"font-weight-bold",attrs:{href:t.getPostUrl(e.status)}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"comment"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),"data-placement":"bottom","data-toggle":"tooltip",title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" commented on your "),a("a",{staticClass:"font-weight-bold",attrs:{href:t.getPostUrl(e.status)}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"group:comment"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" commented on your "),a("a",{staticClass:"font-weight-bold",attrs:{href:e.group_post_url}},[t._v("group post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"story:react"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" reacted to your "),a("a",{staticClass:"font-weight-bold",attrs:{href:"/account/direct/t/"+e.account.id}},[t._v("story")]),t._v(".\n\t\t\t\t\t\t\t")])]):"story:comment"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" commented on your "),a("a",{staticClass:"font-weight-bold",attrs:{href:"/account/direct/t/"+e.account.id}},[t._v("story")]),t._v(".\n\t\t\t\t\t\t\t")])]):"mention"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),"data-placement":"bottom","data-toggle":"tooltip",title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" "),a("a",{staticClass:"font-weight-bold",attrs:{href:t.mentionUrl(e.status)}},[t._v("mentioned")]),t._v(" you.\n\t\t\t\t\t\t\t")])]):"follow"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),"data-placement":"bottom","data-toggle":"tooltip",title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" followed you.\n\t\t\t\t\t\t\t")])]):"share"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),"data-placement":"bottom","data-toggle":"tooltip",title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" shared your "),a("a",{staticClass:"font-weight-bold",attrs:{href:t.getPostUrl(e.status)}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"modlog"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(t.truncate(e.account.username)))]),t._v(" updated a "),a("a",{staticClass:"font-weight-bold",attrs:{href:e.modlog.url}},[t._v("modlog")]),t._v(".\n\t\t\t\t\t\t\t")])]):"tagged"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" tagged you in a "),a("a",{staticClass:"font-weight-bold",attrs:{href:e.tagged.post_url}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"direct"==e.type||"direct"==e.type?a("div",[a("p",{staticClass:"my-0"},[a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" sent a "),a("a",{staticClass:"font-weight-bold",attrs:{href:"/account/direct/t/"+e.account.id}},[t._v("dm")]),t._v(".\n\t\t\t\t\t\t\t")])]):"group.join.approved"==e.type?a("div",[a("p",{staticClass:"my-0"},[t._v("\n\t\t\t\t\t\t\t\tYour application to join "),a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:e.group.url,title:e.group.name}},[t._v(t._s(t.truncate(e.group.name)))]),t._v(" was approved!\n\t\t\t\t\t\t\t")])]):"group.join.rejected"==e.type?a("div",[a("p",{staticClass:"my-0"},[t._v("\n\t\t\t\t\t\t\t\tYour application to join "),a("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:e.group.url,title:e.group.name}},[t._v(t._s(t.truncate(e.group.name)))]),t._v(" was rejected. You can re-apply to join in 6 months.\n\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),a("div",{staticClass:"align-items-center"},[a("span",{staticClass:"small text-muted",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:e.created_at}},[t._v(t._s(t.timeAgo(e.created_at)))])])]),t._v(" "),a("div",[e.status&&e.status&&e.status.media_attachments&&e.status.media_attachments.length?a("div",[a("a",{attrs:{href:t.getPostUrl(e.status)}},[a("img",{attrs:{src:e.status.media_attachments[0].preview_url,width:"32px",height:"32px"}})])]):e.status&&e.status.parent&&e.status.parent.media_attachments&&e.status.parent.media_attachments.length?a("div",[a("a",{attrs:{href:e.status.parent.url}},[a("img",{attrs:{src:e.status.parent.media_attachments[0].preview_url,width:"32px",height:"32px"}})])]):a("div",["/"!=t.viewContext(e)?a("a",{staticClass:"btn btn-outline-primary py-0 font-weight-bold",attrs:{href:t.viewContext(e)}},[t._v("View")]):t._e()])])]):t._e()})),t._v(" "),t.notifications.length?a("div",[a("infinite-loading",{on:{infinite:t.infiniteNotifications}},[a("div",{staticClass:"font-weight-bold",attrs:{slot:"no-results"},slot:"no-results"}),t._v(" "),a("div",{staticClass:"font-weight-bold",attrs:{slot:"no-more"},slot:"no-more"})])],1):t._e(),t._v(" "),0==t.notifications.length?a("div",{staticClass:"text-lighter text-center py-3"},[t._m(0),t._v(" "),a("p",{staticClass:"mb-0 small font-weight-bold"},[t._v("0 Notifications!")])]):t._e()],2)])])])},n=[function(){var t=this._self._c;return t("p",{staticClass:"mb-0"},[t("i",{staticClass:"fas fa-inbox fa-3x"})])}]},78324:(t,a,e)=>{Vue.component("activity-component",e(567).default)},567:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>r});var o=e(99429),n=e(32400),s={};for(const t in n)"default"!==t&&(s[t]=()=>n[t]);e.d(a,s);const r=(0,e(51900).default)(n.default,o.render,o.staticRenderFns,!1,null,null,null).exports},32400:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>s});var o=e(5364),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);e.d(a,n);const s=o.default},99429:(t,a,e)=>{"use strict";e.r(a);var o=e(69258),n={};for(const t in o)"default"!==t&&(n[t]=()=>o[t]);e.d(a,n)}},t=>{t.O(0,[8898],(()=>{return a=78324,t(t.s=a);var a}));t.O()}]);