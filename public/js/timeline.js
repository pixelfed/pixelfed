(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"/jad":function(t,e,n){"use strict";var i=n("1gDp"),s=n("ngXG"),o={props:{status:{type:Object},recommended:{type:Boolean,default:!1},reactionBar:{type:Boolean,default:!0},hasTopBorder:{type:Boolean,default:!1},size:{type:String,validator:function(t){return["regular","small"].includes(t)},default:"regular"}},components:{"context-menu":i.a,"poll-card":s.a},data:function(){return{config:window.App.config,profile:{},loading:!0,replies:[],replyId:null,lightboxMedia:!1,showSuggestions:!0,showReadMore:!0,replyStatus:{},replyText:"",replyNsfw:!1,emoji:window.App.util.emoji,content:void 0}},mounted:function(){var t=this;this.profile=window._sharedData.curUser,this.content=this.status.content,this.status.emojis.forEach((function(e){var n='<img draggable="false" class="emojione custom-emoji" alt="'.concat(e.shortcode,'" title="').concat(e.shortcode,'" src="').concat(e.url,'" data-original="').concat(e.url,'" data-static="').concat(e.static_url,'" width="18" height="18" />');t.content=t.content.replace(":".concat(e.shortcode,":"),n)}))},methods:{formatCount:function(t){return App.util.format.count(t)},statusUrl:function(t){return 1==t.local?t.url:"/i/web/post/_/"+t.account.id+"/"+t.id},profileUrl:function(t){return 1==t.local?t.account.url:"/i/web/profile/_/"+t.account.id},timestampFormat:function(t){var e=new Date(t);return e.toDateString()+" "+e.toLocaleTimeString()},shortTimestamp:function(t){return window.App.util.format.timeAgo(t)},statusCardUsernameFormat:function(t){if(1==t.account.local)return t.account.username;var e=window.App.config.username.remote.format,n=window.App.config.username.remote.custom,i=t.account.username,s=document.createElement("a");switch(s.href=t.account.url,s=s.hostname,e){case"@":return i+'<span class="text-lighter font-weight-bold">@'+s+"</span>";case"from":return i+'<span class="text-lighter font-weight-bold"> <span class="font-weight-normal">from</span> '+s+"</span>";case"custom":return i+'<span class="text-lighter font-weight-bold"> '+n+" "+s+"</span>";default:return i+'<span class="text-lighter font-weight-bold">@'+s+"</span>"}},lightbox:function(t){window.location.href=t.media_attachments[0].url},labelRedirect:function(t){var e="/i/redirect?url="+encodeURI(this.config.features.label.covid.url);window.location.href=e},likeStatus:function(t,e){if(0!=$("body").hasClass("loggedIn")){var n=t.favourites_count;t.favourited=!t.favourited,axios.post("/i/like",{item:t.id}).then((function(e){t.favourites_count=e.data.count,t.favourited=!!t.favourited})).catch((function(e){t.favourited=!!t.favourited,t.favourites_count=n,swal("Error","Something went wrong, please try again later.","error")})),window.navigator.vibrate(200),t.favourited&&setTimeout((function(){e.target.classList.add("animate__animated","animate__bounce")}),100)}},commentFocus:function(t,e){this.$emit("comment-focus",t)},commentSubmit:function(t,e){var n=this;this.replySending=!0;var i=t.id,s=this.replyText,o=this.config.uploader.max_caption_length;if(s.length>o)return this.replySending=!1,void swal("Comment Too Long","Please make sure your comment is "+o+" characters or less.","error");axios.post("/i/comment",{item:i,comment:s,sensitive:this.replyNsfw}).then((function(t){n.replyText="",n.replies.push(t.data.entity),n.$refs.replyModal.hide()})),this.replySending=!1},owner:function(t){return this.profile.id===t.account.id},admin:function(){return 1==this.profile.is_admin},ownerOrAdmin:function(t){return this.owner(t)||this.admin()},ctxMenu:function(){this.$refs.contextMenu.open()},timeAgo:function(t){return App.util.format.timeAgo(t)},statusDeleted:function(t){this.$emit("status-delete",t)},canFollow:function(t){return!!t.hasOwnProperty("relationship")&&(!(!t.hasOwnProperty("account")||!t.account.hasOwnProperty("id"))&&(t.account.id!=this.profile.id&&!t.relationship.following))},follow:function(t){var e=this;event.currentTarget.blur(),axios.post("/i/follow",{item:t}).then((function(n){e.status.relationship.following=!0,e.$emit("followed",t)})).catch((function(t){t.response.data.message&&swal("Error",t.response.data.message,"error")}))},unfollow:function(t){var e=this;event.currentTarget.blur(),axios.post("/i/follow",{item:t}).then((function(n){e.status.relationship.following=!1,e.$emit("unfollowed",t)})).catch((function(t){t.response.data.message&&swal("Error",t.response.data.message,"error")}))}}},a=(n("RePV"),n("KHd+")),r=Object(a.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"status-card-component",class:{"status-card-sm":"small"===t.size}},["text"===t.status.pf_type?n("div",{staticClass:"card shadow-none border rounded-0",class:{"border-top-0":!t.hasTopBorder}},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"media"},[n("img",{staticClass:"rounded-circle box-shadow mr-2",attrs:{src:t.status.account.avatar,width:"32px",height:"32px",onerror:"this.onerror=null;this.src='/storage/avatars/default.png?v=2'",alt:"avatar"}}),t._v(" "),n("div",{staticClass:"media-body"},[n("div",{staticClass:"pl-2 d-flex align-items-top"},[n("a",{staticClass:"username font-weight-bold text-dark text-decoration-none text-break",attrs:{href:t.profileUrl(t.status)},domProps:{innerHTML:t._s(t.statusCardUsernameFormat(t.status))}},[t._v("\n\t\t\t\t\t\t\tLoading...\n\t\t\t\t\t\t")]),t._v(" "),n("span",{staticClass:"px-1 text-lighter"},[t._v("\n\t\t\t\t\t\t\t·\n\t\t\t\t\t\t")]),t._v(" "),n("a",{staticClass:"font-weight-bold text-lighter",attrs:{href:t.statusUrl(t.status)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.shortTimestamp(t.status.created_at))+"\n\t\t\t\t\t\t")]),t._v(" "),n("span",{staticClass:"text-right",staticStyle:{"flex-grow":"1"}},[n("button",{staticClass:"btn btn-link text-dark py-0",attrs:{type:"button"},on:{click:function(e){return t.ctxMenu()}}},[n("span",{staticClass:"fas fa-ellipsis-h text-lighter"}),t._v(" "),n("span",{staticClass:"sr-only"},[t._v("Post Menu")])])])]),t._v(" "),n("div",{staticClass:"pl-2"},[t.status.sensitive?n("details",[n("summary",{staticClass:"mb-2 font-weight-bold text-muted"},[t._v("Content Warning")]),t._v(" "),n("p",{staticClass:"pt-2 text-break status-content",domProps:{innerHTML:t._s(t.status.content)}})]):n("p",{staticClass:"pt-2 text-break status-content",domProps:{innerHTML:t._s(t.status.content)}}),t._v(" "),n("p",{staticClass:"mb-0"},[n("i",{staticClass:"fa-heart fa-lg cursor-pointer mr-3",class:{"far text-muted":!t.status.favourited,"fas text-danger":t.status.favourited},on:{click:function(e){return t.likeStatus(t.status,e)}}}),t._v(" "),n("i",{staticClass:"far fa-comment cursor-pointer text-muted fa-lg mr-3",on:{click:function(e){return t.commentFocus(t.status,e)}}})])])])])])]):"poll"===t.status.pf_type?n("div",[n("poll-card",{attrs:{status:t.status,profile:t.profile},on:{"status-delete":t.statusDeleted}})],1):n("div",{staticClass:"card rounded-0 border-top-0 status-card card-md-rounded-0 shadow-none border"},[t.status?n("div",{staticClass:"card-header d-inline-flex align-items-center bg-white"},[n("div",[n("img",{staticClass:"rounded-circle box-shadow",attrs:{src:t.status.account.avatar,width:"32px",height:"32px",onerror:"this.onerror=null;this.src='/storage/avatars/default.png?v=2'",alt:"avatar"}})]),t._v(" "),n("div",{staticClass:"pl-2"},[n("a",{staticClass:"username font-weight-bold text-dark text-decoration-none text-break",attrs:{href:t.profileUrl(t.status)},domProps:{innerHTML:t._s(t.statusCardUsernameFormat(t.status))}},[t._v("\n\t\t\t\t\tLoading...\n\t\t\t\t")]),t._v(" "),t.status.account.is_admin?n("span",{staticClass:"fa-stack",staticStyle:{height:"1em","line-height":"1em","max-width":"19px"},attrs:{title:"Admin Account","data-toggle":"tooltip"}},[n("i",{staticClass:"fas fa-certificate text-danger fa-stack-1x"}),t._v(" "),n("i",{staticClass:"fas fa-crown text-white fa-sm fa-stack-1x",staticStyle:{"font-size":"7px"}})]):t._e(),t._v(" "),n("div",{staticClass:"d-flex align-items-center"},[t.status.place?n("a",{staticClass:"small text-decoration-none text-muted",attrs:{href:"/discover/places/"+t.status.place.id+"/"+t.status.place.slug,title:"Location","data-toggle":"tooltip"}},[n("i",{staticClass:"fas fa-map-marked-alt"}),t._v(" "+t._s(t.status.place.name)+", "+t._s(t.status.place.country))]):t._e()])]),t._v(" "),t.canFollow(t.status)?n("div",[n("span",{staticClass:"px-2"}),t._v(" "),n("button",{staticClass:"btn btn-primary btn-sm font-weight-bold py-1 px-3 rounded-lg",on:{click:function(e){return t.follow(t.status.account.id)}}},[n("i",{staticClass:"far fa-user-plus mr-1"}),t._v(" Follow")])]):t._e(),t._v(" "),t.status.hasOwnProperty("relationship")&&t.status.relationship.hasOwnProperty("following")&&t.status.relationship.following?n("div",[n("span",{staticClass:"px-2"}),t._v(" "),n("button",{staticClass:"btn btn-outline-primary btn-sm font-weight-bold py-1 px-3 rounded-lg",on:{click:function(e){return t.unfollow(t.status.account.id)}}},[n("i",{staticClass:"far fa-user-check mr-1"}),t._v(" Following")])]):t._e(),t._v(" "),n("div",{staticClass:"text-right",staticStyle:{"flex-grow":"1"}},[n("button",{staticClass:"btn btn-link text-dark py-0",attrs:{type:"button"},on:{click:function(e){return t.ctxMenu()}}},[n("span",{staticClass:"fas fa-ellipsis-h text-lighter"}),t._v(" "),n("span",{staticClass:"sr-only"},[t._v("Post Menu")])])])]):t._e(),t._v(" "),n("div",{staticClass:"postPresenterContainer",staticStyle:{background:"#000"}},["photo"===t.status.pf_type?n("div",{staticClass:"w-100"},[n("photo-presenter",{attrs:{status:t.status},on:{lightbox:t.lightbox,togglecw:function(e){t.status.sensitive=!1}}})],1):"video"===t.status.pf_type?n("div",{staticClass:"w-100"},[n("video-presenter",{attrs:{status:t.status},on:{togglecw:function(e){t.status.sensitive=!1}}})],1):"photo:album"===t.status.pf_type?n("div",{staticClass:"w-100"},[n("photo-album-presenter",{attrs:{status:t.status},on:{lightbox:t.lightbox,togglecw:function(e){t.status.sensitive=!1}}})],1):"video:album"===t.status.pf_type?n("div",{staticClass:"w-100"},[n("video-album-presenter",{attrs:{status:t.status},on:{togglecw:function(e){t.status.sensitive=!1}}})],1):"photo:video:album"===t.status.pf_type?n("div",{staticClass:"w-100"},[n("mixed-album-presenter",{attrs:{status:t.status},on:{lightbox:t.lightbox,togglecw:function(e){t.status.sensitive=!1}}})],1):n("div",{staticClass:"w-100"},[n("p",{staticClass:"text-center p-0 font-weight-bold text-white"},[t._v("Error: Problem rendering preview.")])])]),t._v(" "),t.config.features.label.covid.enabled&&t.status.label&&1==t.status.label.covid?n("div",{staticClass:"card-body border-top border-bottom py-2 cursor-pointer pr-2",on:{click:function(e){return t.labelRedirect()}}},[n("p",{staticClass:"font-weight-bold d-flex justify-content-between align-items-center mb-0"},[n("span",[n("i",{staticClass:"fas fa-info-circle mr-2"}),t._v("\n\t\t\t\t\tFor information about COVID-19, "+t._s(t.config.features.label.covid.org)+"\n\t\t\t\t")]),t._v(" "),t._m(0)])]):t._e(),t._v(" "),n("div",{staticClass:"card-body"},[t.reactionBar?n("div",{staticClass:"reactions my-1 pb-2"},[t.status.favourited?n("h3",{staticClass:"fas fa-heart text-danger pr-3 m-0 cursor-pointer",attrs:{title:"Like"},on:{click:function(e){return t.likeStatus(t.status,e)}}}):n("h3",{staticClass:"fal fa-heart pr-3 m-0 like-btn text-dark cursor-pointer",attrs:{title:"Like"},on:{click:function(e){return t.likeStatus(t.status,e)}}}),t._v(" "),t.status.comments_disabled?t._e():n("h3",{staticClass:"fal fa-comment text-dark pr-3 m-0 cursor-pointer",attrs:{title:"Comment"},on:{click:function(e){return t.commentFocus(t.status,e)}}}),t._v(" "),t.status.taggedPeople.length?n("span",{staticClass:"float-right"},[n("span",{staticClass:"font-weight-light small",staticStyle:{color:"#718096"}},[n("i",{staticClass:"far fa-user",attrs:{"data-toggle":"tooltip",title:"Tagged People"}}),t._v(" "),t._l(t.status.taggedPeople,(function(t,e){return n("span",{staticClass:"mr-n2"},[n("a",{attrs:{href:"/"+t.username}},[n("img",{staticClass:"border rounded-circle",attrs:{src:t.avatar,width:"20px",height:"20px","data-toggle":"tooltip",title:"@"+t.username,alt:"Avatar"}})])])}))],2)]):t._e()]):t._e(),t._v(" "),t.status.liked_by.username&&t.status.liked_by.username!==t.profile.username?n("div",{staticClass:"likes mb-1"},[n("span",{staticClass:"like-count"},[t._v("Liked by\n\t\t\t\t\t"),n("a",{staticClass:"font-weight-bold text-dark",attrs:{href:t.status.liked_by.url}},[t._v(t._s(t.status.liked_by.username))]),t._v(" "),1==t.status.liked_by.others?n("span",[t._v("\n\t\t\t\t\t\tand "),t.status.liked_by.total_count_pretty?n("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.status.liked_by.total_count_pretty))]):t._e(),t._v(" "),n("span",{staticClass:"font-weight-bold"},[t._v("others")])]):t._e()])]):t._e(),t._v(" "),"text"!=t.status.pf_type?n("div",{staticClass:"caption"},[t.status.sensitive?t._e():n("p",{staticClass:"mb-2 read-more",staticStyle:{overflow:"hidden"}},[n("span",{staticClass:"username font-weight-bold"},[n("bdi",[n("a",{staticClass:"text-dark",attrs:{href:t.profileUrl(t.status)}},[t._v(t._s(t.status.account.username))])])]),t._v(" "),n("span",{staticClass:"status-content",domProps:{innerHTML:t._s(t.content)}})])]):t._e(),t._v(" "),n("div",{staticClass:"timestamp mt-2"},[n("p",{staticClass:"small mb-0"},["archived"!=t.status.visibility?n("a",{staticClass:"text-muted text-uppercase",attrs:{href:t.statusUrl(t.status)}},[n("timeago",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{datetime:t.status.created_at,"auto-update":60,"converter-options":{includeSeconds:!0},title:t.timestampFormat(t.status.created_at)}})],1):n("span",{staticClass:"text-muted text-uppercase"},[t._v("\n\t\t\t\t\t\tPosted "),n("timeago",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],attrs:{datetime:t.status.created_at,"auto-update":60,"converter-options":{includeSeconds:!0},title:t.timestampFormat(t.status.created_at)}})],1),t._v(" "),t.recommended?n("span",[n("span",{staticClass:"px-1"},[t._v("·")]),t._v(" "),n("span",{staticClass:"text-muted"},[t._v("Based on popular and trending content")])]):t._e()])])])]),t._v(" "),n("context-menu",{ref:"contextMenu",attrs:{status:t.status,profile:t.profile},on:{"status-delete":t.statusDeleted}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fas fa-chevron-right text-lighter"})])}],!1,null,null,null);e.a=r.exports},"1gDp":function(t,e,n){"use strict";var i={props:["status","profile"],data:function(){return{ctxMenuStatus:!1,ctxMenuRelationship:!1,ctxEmbedPayload:!1,copiedEmbed:!1,replySending:!1,ctxEmbedShowCaption:!0,ctxEmbedShowLikes:!1,ctxEmbedCompactMode:!1,confirmModalTitle:"Are you sure?",confirmModalIdentifer:null,confirmModalType:!1}},watch:{ctxEmbedShowCaption:function(t,e){1==t&&(this.ctxEmbedCompactMode=!1);var n=this.ctxEmbedCompactMode?"compact":"full";this.ctxEmbedPayload=window.App.util.embed.post(this.ctxMenuStatus.url,this.ctxEmbedShowCaption,this.ctxEmbedShowLikes,n)},ctxEmbedShowLikes:function(t,e){1==t&&(this.ctxEmbedCompactMode=!1);var n=this.ctxEmbedCompactMode?"compact":"full";this.ctxEmbedPayload=window.App.util.embed.post(this.ctxMenuStatus.url,this.ctxEmbedShowCaption,this.ctxEmbedShowLikes,n)},ctxEmbedCompactMode:function(t,e){1==t&&(this.ctxEmbedShowCaption=!1,this.ctxEmbedShowLikes=!1);var n=this.ctxEmbedCompactMode?"compact":"full";this.ctxEmbedPayload=window.App.util.embed.post(this.ctxMenuStatus.url,this.ctxEmbedShowCaption,this.ctxEmbedShowLikes,n)}},methods:{open:function(){this.ctxMenu()},ctxMenu:function(){var t=this;this.ctxMenuStatus=this.status,this.ctxEmbedPayload=window.App.util.embed.post(this.status.url),this.status.account.id==this.profile.id?(this.ctxMenuRelationship=!1,this.$refs.ctxModal.show()):axios.get("/api/pixelfed/v1/accounts/relationships",{params:{"id[]":this.status.account.id}}).then((function(e){t.ctxMenuRelationship=e.data[0],t.$refs.ctxModal.show()}))},closeCtxMenu:function(){this.copiedEmbed=!1,this.ctxMenuStatus=!1,this.ctxMenuRelationship=!1,this.$refs.ctxModal.hide(),this.$refs.ctxReport.hide(),this.$refs.ctxReportOther.hide(),this.closeModals()},ctxMenuCopyLink:function(){var t=this.ctxMenuStatus;navigator.clipboard.writeText(t.url),this.closeModals()},ctxMenuGoToPost:function(){var t=this.ctxMenuStatus;window.location.href=this.statusUrl(t),this.closeCtxMenu()},ctxMenuGoToProfile:function(){var t=this.ctxMenuStatus;window.location.href=this.profileUrl(t),this.closeCtxMenu()},ctxMenuFollow:function(){var t=this,e=this.ctxMenuStatus.account.id;axios.post("/i/follow",{item:e}).then((function(e){var n=t.ctxMenuStatus.account.acct;t.closeCtxMenu(),setTimeout((function(){swal("Follow successful!","You are now following "+n,"success")}),500)}))},ctxMenuUnfollow:function(){var t=this,e=this.ctxMenuStatus.account.id;axios.post("/i/follow",{item:e}).then((function(e){var n=t.ctxMenuStatus.account.acct;"home"==t.scope&&(t.feed=t.feed.filter((function(e){return e.account.id!=t.ctxMenuStatus.account.id}))),t.closeCtxMenu(),setTimeout((function(){swal("Unfollow successful!","You are no longer following "+n,"success")}),500)}))},ctxMenuReportPost:function(){this.$refs.ctxModal.hide(),this.$refs.ctxReport.show()},ctxMenuEmbed:function(){this.closeModals(),this.$refs.ctxEmbedModal.show()},ctxMenuShare:function(){this.$refs.ctxModal.hide(),this.$refs.ctxShareModal.show()},closeCtxShareMenu:function(){this.$refs.ctxShareModal.hide(),this.$refs.ctxModal.show()},ctxCopyEmbed:function(){navigator.clipboard.writeText(this.ctxEmbedPayload),this.ctxEmbedShowCaption=!0,this.ctxEmbedShowLikes=!1,this.ctxEmbedCompactMode=!1,this.$refs.ctxEmbedModal.hide()},ctxModMenuShow:function(){this.$refs.ctxModal.hide(),this.$refs.ctxModModal.show()},ctxModOtherMenuShow:function(){this.$refs.ctxModal.hide(),this.$refs.ctxModModal.hide(),this.$refs.ctxModOtherModal.show()},ctxModMenu:function(){this.$refs.ctxModal.hide()},ctxModMenuClose:function(){this.closeModals()},ctxModOtherMenuClose:function(){this.closeModals(),this.$refs.ctxModModal.show()},formatCount:function(t){return App.util.format.count(t)},openCtxReportOtherMenu:function(){var t=this.ctxMenuStatus;this.closeCtxMenu(),this.ctxMenuStatus=t,this.$refs.ctxReportOther.show()},ctxReportMenuGoBack:function(){this.$refs.ctxReportOther.hide(),this.$refs.ctxReport.hide(),this.$refs.ctxModal.show()},ctxReportOtherMenuGoBack:function(){this.$refs.ctxReportOther.hide(),this.$refs.ctxModal.hide(),this.$refs.ctxReport.show()},sendReport:function(t){var e=this,n=this.ctxMenuStatus.id;swal({title:"Confirm Report",text:"Are you sure you want to report this post?",icon:"warning",buttons:!0,dangerMode:!0}).then((function(i){i?axios.post("/i/report/",{report:t,type:"post",id:n}).then((function(t){e.closeCtxMenu(),swal("Report Sent!","We have successfully received your report.","success")})).catch((function(t){swal("Oops!","There was an issue reporting this post.","error")})):e.closeCtxMenu()}))},closeModals:function(){this.$refs.ctxModal.hide(),this.$refs.ctxModModal.hide(),this.$refs.ctxModOtherModal.hide(),this.$refs.ctxShareModal.hide(),this.$refs.ctxEmbedModal.hide(),this.$refs.ctxReport.hide(),this.$refs.ctxReportOther.hide(),this.$refs.ctxConfirm.hide()},openCtxStatusModal:function(){this.closeModals(),this.$refs.ctxStatusModal.show()},openConfirmModal:function(){this.closeModals(),this.$refs.ctxConfirm.show()},closeConfirmModal:function(){this.closeModals(),this.confirmModalTitle="Are you sure?",this.confirmModalType=!1,this.confirmModalIdentifer=null},confirmModalConfirm:function(){var t=this;switch(this.confirmModalType){case"post.delete":axios.post("/i/delete",{type:"status",item:this.confirmModalIdentifer}).then((function(e){t.feed=t.feed.filter((function(e){return e.id!=t.confirmModalIdentifer})),t.closeConfirmModal()})).catch((function(e){t.closeConfirmModal(),swal("Error","Something went wrong. Please try again later.","error")}))}this.closeConfirmModal()},confirmModalCancel:function(){this.closeConfirmModal()},moderatePost:function(t,e,n){var i=this,s=(t.account.username,t.id,""),o=this;switch(e){case"addcw":s="Are you sure you want to add a content warning to this post?",swal({title:"Confirm",text:s,icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){n&&axios.post("/api/v2/moderator/action",{action:e,item_id:t.id,item_type:"status"}).then((function(e){swal("Success","Successfully added content warning","success"),t.sensitive=!0,o.closeModals(),o.ctxModMenuClose()})).catch((function(t){swal("Error","Something went wrong, please try again later.","error"),o.closeModals(),o.ctxModMenuClose()}))}));break;case"remcw":s="Are you sure you want to remove the content warning on this post?",swal({title:"Confirm",text:s,icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){n&&axios.post("/api/v2/moderator/action",{action:e,item_id:t.id,item_type:"status"}).then((function(e){swal("Success","Successfully added content warning","success"),t.sensitive=!1,o.closeModals(),o.ctxModMenuClose()})).catch((function(t){swal("Error","Something went wrong, please try again later.","error"),o.closeModals(),o.ctxModMenuClose()}))}));break;case"unlist":s="Are you sure you want to unlist this post?",swal({title:"Confirm",text:s,icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){n&&axios.post("/api/v2/moderator/action",{action:e,item_id:t.id,item_type:"status"}).then((function(e){i.feed=i.feed.filter((function(e){return e.id!=t.id})),swal("Success","Successfully unlisted post","success"),o.closeModals(),o.ctxModMenuClose()})).catch((function(t){o.closeModals(),o.ctxModMenuClose(),swal("Error","Something went wrong, please try again later.","error")}))}));break;case"spammer":s="Are you sure you want to mark this user as a spammer? All existing and future posts will be unlisted on timelines and a content warning will be applied.",swal({title:"Confirm",text:s,icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){n&&axios.post("/api/v2/moderator/action",{action:e,item_id:t.id,item_type:"status"}).then((function(t){swal("Success","Successfully marked account as spammer","success"),o.closeModals(),o.ctxModMenuClose()})).catch((function(t){o.closeModals(),o.ctxModMenuClose(),swal("Error","Something went wrong, please try again later.","error")}))}))}},shareStatus:function(t,e){0!=$("body").hasClass("loggedIn")&&(this.closeModals(),axios.post("/i/share",{item:t.id}).then((function(e){t.reblogs_count=e.data.count,t.reblogged=!t.reblogged,t.reblogged?swal("Success","You shared this post","success"):swal("Success","You unshared this post","success")})).catch((function(t){swal("Error","Something went wrong, please try again later.","error")})))},statusUrl:function(t){return 1==t.account.local?t.url:"/i/web/post/_/"+t.account.id+"/"+t.id},profileUrl:function(t){return 1==t.account.local?t.account.url:"/i/web/profile/_/"+t.account.id},deletePost:function(t){var e=this;0!=$("body").hasClass("loggedIn")&&0!=this.ownerOrAdmin(t)&&0!=window.confirm("Are you sure you want to delete this post?")&&axios.post("/i/delete",{type:"status",item:t.id}).then((function(n){e.$emit("status-delete",t.id),e.closeModals()})).catch((function(t){swal("Error","Something went wrong. Please try again later.","error")}))},owner:function(t){return this.profile.id===t.account.id},admin:function(){return 1==this.profile.is_admin},ownerOrAdmin:function(t){return this.owner(t)||this.admin()},archivePost:function(t){var e=this;0!=window.confirm("Are you sure you want to archive this post?")&&axios.post("/api/pixelfed/v2/status/"+t.id+"/archive").then((function(n){e.$emit("status-delete",t.id),e.closeModals()}))},unarchivePost:function(t){var e=this;0!=window.confirm("Are you sure you want to unarchive this post?")&&axios.post("/api/pixelfed/v2/status/"+t.id+"/unarchive").then((function(t){e.closeModals()}))}}},s=n("KHd+"),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-stack"},[n("b-modal",{ref:"ctxModal",attrs:{id:"ctx-modal","hide-header":"","hide-footer":"",centered:"",rounded:"",size:"sm","body-class":"list-group-flush p-0 rounded"}},[n("div",{staticClass:"list-group text-center"},["archived"!==t.status.visibility?n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.ctxMenuGoToPost()}}},[t._v("View Post")]):t._e(),t._v(" "),"archived"!==t.status.visibility?n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.ctxMenuGoToProfile()}}},[t._v("View Profile")]):t._e(),t._v(" "),"archived"!==t.status.visibility?n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.ctxMenuShare()}}},[t._v("Share")]):t._e(),t._v(" "),t.status&&t.profile&&1==t.profile.is_admin&&"archived"!==t.status.visibility?n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.ctxModMenuShow()}}},[t._v("Moderation Tools")]):t._e(),t._v(" "),t.status&&t.status.account.id!=t.profile.id?n("div",{staticClass:"list-group-item rounded cursor-pointer text-danger",on:{click:function(e){return t.ctxMenuReportPost()}}},[t._v("Report")]):t._e(),t._v(" "),t.status&&t.profile.id==t.status.account.id&&"archived"!==t.status.visibility?n("div",{staticClass:"list-group-item rounded cursor-pointer text-danger",on:{click:function(e){return t.archivePost(t.status)}}},[t._v("Archive")]):t._e(),t._v(" "),t.status&&t.profile.id==t.status.account.id&&"archived"==t.status.visibility?n("div",{staticClass:"list-group-item rounded cursor-pointer text-danger",on:{click:function(e){return t.unarchivePost(t.status)}}},[t._v("Unarchive")]):t._e(),t._v(" "),t.status&&(t.profile.is_admin||t.profile.id==t.status.account.id)&&"archived"!==t.status.visibility?n("div",{staticClass:"list-group-item rounded cursor-pointer text-danger",on:{click:function(e){return t.deletePost(t.status)}}},[t._v("Delete")]):t._e(),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer text-lighter",on:{click:function(e){return t.closeCtxMenu()}}},[t._v("Cancel")])])]),t._v(" "),n("b-modal",{ref:"ctxModModal",attrs:{id:"ctx-mod-modal","hide-header":"","hide-footer":"",centered:"",rounded:"",size:"sm","body-class":"list-group-flush p-0 rounded"}},[n("div",{staticClass:"list-group text-center"},[n("p",{staticClass:"py-2 px-3 mb-0"}),n("div",{staticClass:"text-center font-weight-bold text-danger"},[t._v("Moderation Tools")]),t._v(" "),n("div",{staticClass:"small text-center text-muted"},[t._v("Select one of the following options")]),t._v(" "),n("p"),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.moderatePost(t.status,"unlist")}}},[t._v("Unlist from Timelines")]),t._v(" "),t.status.sensitive?n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.moderatePost(t.status,"remcw")}}},[t._v("Remove Content Warning")]):n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.moderatePost(t.status,"addcw")}}},[t._v("Add Content Warning")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.moderatePost(t.status,"spammer")}}},[t._v("\n\t\t\t\tMark as Spammer"),n("br"),t._v(" "),n("span",{staticClass:"small"},[t._v("Unlist + CW existing and future posts")])]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer text-lighter",on:{click:function(e){return t.ctxModMenuClose()}}},[t._v("Cancel")])])]),t._v(" "),n("b-modal",{ref:"ctxModOtherModal",attrs:{id:"ctx-mod-other-modal","hide-header":"","hide-footer":"",centered:"",rounded:"",size:"sm","body-class":"list-group-flush p-0 rounded"}},[n("div",{staticClass:"list-group text-center"},[n("p",{staticClass:"py-2 px-3 mb-0"}),n("div",{staticClass:"text-center font-weight-bold text-danger"},[t._v("Moderation Tools")]),t._v(" "),n("div",{staticClass:"small text-center text-muted"},[t._v("Select one of the following options")]),t._v(" "),n("p"),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.confirmModal()}}},[t._v("Unlist Posts")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.confirmModal()}}},[t._v("Moderation Log")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer text-lighter",on:{click:function(e){return t.ctxModOtherMenuClose()}}},[t._v("Cancel")])])]),t._v(" "),n("b-modal",{ref:"ctxShareModal",attrs:{id:"ctx-share-modal",title:"Share","hide-footer":"","hide-header":"",centered:"",rounded:"",size:"sm","body-class":"list-group-flush p-0 rounded text-center"}},[n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.shareStatus(t.status,e)}}},[t._v(t._s(t.status.reblogged?"Unshare":"Share")+" to Followers")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.ctxMenuCopyLink()}}},[t._v("Copy Link")]),t._v(" "),t.status&&1==t.status.local&&!t.status.in_reply_to_id?n("div",{staticClass:"list-group-item rounded cursor-pointer",on:{click:function(e){return t.ctxMenuEmbed()}}},[t._v("Embed")]):t._e(),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer text-lighter",on:{click:function(e){return t.closeCtxShareMenu()}}},[t._v("Cancel")])]),t._v(" "),n("b-modal",{ref:"ctxEmbedModal",attrs:{id:"ctx-embed-modal","hide-header":"","hide-footer":"",centered:"",rounded:"",size:"md","body-class":"p-2 rounded"}},[n("div",[n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ctxEmbedPayload,expression:"ctxEmbedPayload"}],staticClass:"form-control disabled text-monospace",staticStyle:{"overflow-y":"hidden",border:"1px solid #efefef","font-size":"12px","line-height":"18px",margin:"0 0 7px",resize:"none"},attrs:{rows:"8",disabled:""},domProps:{value:t.ctxEmbedPayload},on:{input:function(e){e.target.composing||(t.ctxEmbedPayload=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group pl-2 d-flex justify-content-center"},[n("div",{staticClass:"form-check mr-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.ctxEmbedShowCaption,expression:"ctxEmbedShowCaption"}],staticClass:"form-check-input",attrs:{type:"checkbox",disabled:1==t.ctxEmbedCompactMode},domProps:{checked:Array.isArray(t.ctxEmbedShowCaption)?t._i(t.ctxEmbedShowCaption,null)>-1:t.ctxEmbedShowCaption},on:{change:function(e){var n=t.ctxEmbedShowCaption,i=e.target,s=!!i.checked;if(Array.isArray(n)){var o=t._i(n,null);i.checked?o<0&&(t.ctxEmbedShowCaption=n.concat([null])):o>-1&&(t.ctxEmbedShowCaption=n.slice(0,o).concat(n.slice(o+1)))}else t.ctxEmbedShowCaption=s}}}),t._v(" "),n("label",{staticClass:"form-check-label font-weight-light"},[t._v("\n\t\t\t\t\t\tShow Caption\n\t\t\t\t\t")])]),t._v(" "),n("div",{staticClass:"form-check mr-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.ctxEmbedShowLikes,expression:"ctxEmbedShowLikes"}],staticClass:"form-check-input",attrs:{type:"checkbox",disabled:1==t.ctxEmbedCompactMode},domProps:{checked:Array.isArray(t.ctxEmbedShowLikes)?t._i(t.ctxEmbedShowLikes,null)>-1:t.ctxEmbedShowLikes},on:{change:function(e){var n=t.ctxEmbedShowLikes,i=e.target,s=!!i.checked;if(Array.isArray(n)){var o=t._i(n,null);i.checked?o<0&&(t.ctxEmbedShowLikes=n.concat([null])):o>-1&&(t.ctxEmbedShowLikes=n.slice(0,o).concat(n.slice(o+1)))}else t.ctxEmbedShowLikes=s}}}),t._v(" "),n("label",{staticClass:"form-check-label font-weight-light"},[t._v("\n\t\t\t\t\t\tShow Likes\n\t\t\t\t\t")])]),t._v(" "),n("div",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.ctxEmbedCompactMode,expression:"ctxEmbedCompactMode"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.ctxEmbedCompactMode)?t._i(t.ctxEmbedCompactMode,null)>-1:t.ctxEmbedCompactMode},on:{change:function(e){var n=t.ctxEmbedCompactMode,i=e.target,s=!!i.checked;if(Array.isArray(n)){var o=t._i(n,null);i.checked?o<0&&(t.ctxEmbedCompactMode=n.concat([null])):o>-1&&(t.ctxEmbedCompactMode=n.slice(0,o).concat(n.slice(o+1)))}else t.ctxEmbedCompactMode=s}}}),t._v(" "),n("label",{staticClass:"form-check-label font-weight-light"},[t._v("\n\t\t\t\t\t\tCompact Mode\n\t\t\t\t\t")])])]),t._v(" "),n("hr"),t._v(" "),n("button",{class:t.copiedEmbed?"btn btn-primary btn-block btn-sm py-1 font-weight-bold disabed":"btn btn-primary btn-block btn-sm py-1 font-weight-bold",attrs:{disabled:t.copiedEmbed},on:{click:t.ctxCopyEmbed}},[t._v(t._s(t.copiedEmbed?"Embed Code Copied!":"Copy Embed Code"))]),t._v(" "),n("p",{staticClass:"mb-0 px-2 small text-muted"},[t._v("By using this embed, you agree to our "),n("a",{attrs:{href:"/site/terms"}},[t._v("Terms of Use")])])])]),t._v(" "),n("b-modal",{ref:"ctxReport",attrs:{id:"ctx-report","hide-header":"","hide-footer":"",centered:"",rounded:"",size:"sm","body-class":"list-group-flush p-0 rounded"}},[n("p",{staticClass:"py-2 px-3 mb-0"}),n("div",{staticClass:"text-center font-weight-bold text-danger"},[t._v("Report")]),t._v(" "),n("div",{staticClass:"small text-center text-muted"},[t._v("Select one of the following options")]),t._v(" "),n("p"),t._v(" "),n("div",{staticClass:"list-group text-center"},[n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.sendReport("spam")}}},[t._v("Spam")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.sendReport("sensitive")}}},[t._v("Sensitive Content")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.sendReport("abusive")}}},[t._v("Abusive or Harmful")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.openCtxReportOtherMenu()}}},[t._v("Other")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer text-lighter",on:{click:function(e){return t.ctxReportMenuGoBack()}}},[t._v("Cancel")])])]),t._v(" "),n("b-modal",{ref:"ctxReportOther",attrs:{id:"ctx-report-other","hide-header":"","hide-footer":"",centered:"",rounded:"",size:"sm","body-class":"list-group-flush p-0 rounded"}},[n("p",{staticClass:"py-2 px-3 mb-0"}),n("div",{staticClass:"text-center font-weight-bold text-danger"},[t._v("Report")]),t._v(" "),n("div",{staticClass:"small text-center text-muted"},[t._v("Select one of the following options")]),t._v(" "),n("p"),t._v(" "),n("div",{staticClass:"list-group text-center"},[n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.sendReport("underage")}}},[t._v("Underage Account")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.sendReport("copyright")}}},[t._v("Copyright Infringement")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.sendReport("impersonation")}}},[t._v("Impersonation")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer font-weight-bold",on:{click:function(e){return t.sendReport("scam")}}},[t._v("Scam or Fraud")]),t._v(" "),n("div",{staticClass:"list-group-item rounded cursor-pointer text-lighter",on:{click:function(e){return t.ctxReportOtherMenuGoBack()}}},[t._v("Cancel")])])]),t._v(" "),n("b-modal",{ref:"ctxConfirm",attrs:{id:"ctx-confirm","hide-header":"","hide-footer":"",centered:"",rounded:"",size:"sm","body-class":"list-group-flush p-0 rounded"}},[n("div",{staticClass:"d-flex align-items-center justify-content-center py-3"},[n("div",[t._v(t._s(this.confirmModalTitle))])]),t._v(" "),n("div",{staticClass:"d-flex border-top btn-group btn-group-block rounded-0",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-outline-lighter border-left-0 border-top-0 border-bottom-0 border-right py-2",staticStyle:{color:"rgb(0,122,255) !important"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.confirmModalCancel()}}},[t._v("Cancel")]),t._v(" "),n("button",{staticClass:"btn btn-outline-lighter border-0",staticStyle:{color:"rgb(0,122,255) !important"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.confirmModalConfirm()}}},[t._v("Confirm")])])])],1)}),[],!1,null,null,null);e.a=o.exports},"1kvc":function(t,e,n){"use strict";n("kT+A")},"2Jpm":function(t,e,n){"use strict";n.r(e);var i={props:["status"],methods:{altText:function(t){var e=t.media_attachments[0].description;return e||"Video was not tagged with any alt text."},playOrPause:function(t){var e=t.target;1==e.getAttribute("playing")?(e.removeAttribute("playing"),e.pause()):(e.setAttribute("playing",1),e.play())},toggleContentWarning:function(t){this.$emit("togglecw")}}},s=(n("Lp1U"),n("KHd+")),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return 1==t.status.sensitive?n("div",{staticClass:"content-label-wrapper"},[n("div",{staticClass:"text-light content-label"},[t._m(0),t._v(" "),n("p",{staticClass:"h4 font-weight-bold text-center"},[t._v("\n\t\t\tSensitive Content\n\t\t")]),t._v(" "),n("p",{staticClass:"text-center py-2"},[t._v("\n\t\t\t"+t._s(t.status.spoiler_text?t.status.spoiler_text:"This post may contain sensitive content.")+"\n\t\t")]),t._v(" "),n("p",{staticClass:"mb-0"},[n("button",{staticClass:"btn btn-outline-light btn-block btn-sm font-weight-bold",on:{click:function(e){return t.toggleContentWarning()}}},[t._v("See Post")])])]),t._v(" "),n("blur-hash-image",{attrs:{width:"32",height:"32",punch:1,hash:t.status.media_attachments[0].blurhash,alt:t.altText(t.status)}})],1):n("div",{staticClass:"embed-responsive embed-responsive-16by9"},[n("video",{staticClass:"video",attrs:{controls:"",playsinline:"",preload:"metadata",loop:"",poster:t.status.media_attachments[0].preview_url,"data-id":t.status.id}},[n("source",{attrs:{src:t.status.media_attachments[0].url,type:t.status.media_attachments[0].mime}})])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-center"},[e("i",{staticClass:"far fa-eye-slash fa-2x"})])}],!1,null,"5e63aaf2",null);e.default=o.exports},"4KG8":function(t,e,n){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}if(Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,s=arguments[1],o=0;o<i;o++)if(e=n[o],t.call(s,e,o,n))return e}),window&&"function"!=typeof window.CustomEvent){var i=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};void 0!==window.Event&&(i.prototype=window.Event.prototype),window.CustomEvent=i}var s=function(){function e(n){t(this,e),this.tribute=n,this.tribute.events=this}return n(e,[{key:"bind",value:function(t){t.boundKeydown=this.keydown.bind(t,this),t.boundKeyup=this.keyup.bind(t,this),t.boundInput=this.input.bind(t,this),t.addEventListener("keydown",t.boundKeydown,!1),t.addEventListener("keyup",t.boundKeyup,!1),t.addEventListener("input",t.boundInput,!1)}},{key:"unbind",value:function(t){t.removeEventListener("keydown",t.boundKeydown,!1),t.removeEventListener("keyup",t.boundKeyup,!1),t.removeEventListener("input",t.boundInput,!1),delete t.boundKeydown,delete t.boundKeyup,delete t.boundInput}},{key:"keydown",value:function(t,n){t.shouldDeactivate(n)&&(t.tribute.isActive=!1,t.tribute.hideMenu());var i=this;t.commandEvent=!1,e.keys().forEach((function(e){e.key===n.keyCode&&(t.commandEvent=!0,t.callbacks()[e.value.toLowerCase()](n,i))}))}},{key:"input",value:function(t,e){t.inputEvent=!0,t.keyup.call(this,t,e)}},{key:"click",value:function(t,e){var n=t.tribute;if(n.menu&&n.menu.contains(e.target)){var i=e.target;for(e.preventDefault(),e.stopPropagation();"li"!==i.nodeName.toLowerCase();)if(!(i=i.parentNode)||i===n.menu)throw new Error("cannot find the <li> container for the click");n.selectItemAtIndex(i.getAttribute("data-index"),e),n.hideMenu()}else n.current.element&&!n.current.externalTrigger&&(n.current.externalTrigger=!1,setTimeout((function(){return n.hideMenu()})))}},{key:"keyup",value:function(t,e){if(t.inputEvent&&(t.inputEvent=!1),t.updateSelection(this),27!==e.keyCode){if(!t.tribute.allowSpaces&&t.tribute.hasTrailingSpace)return t.tribute.hasTrailingSpace=!1,t.commandEvent=!0,void t.callbacks().space(e,this);if(!t.tribute.isActive)if(t.tribute.autocompleteMode)t.callbacks().triggerChar(e,this,"");else{var n=t.getKeyCode(t,this,e);if(isNaN(n)||!n)return;var i=t.tribute.triggers().find((function(t){return t.charCodeAt(0)===n}));void 0!==i&&t.callbacks().triggerChar(e,this,i)}t.tribute.current.mentionText.length<t.tribute.current.collection.menuShowMinLength||((t.tribute.current.trigger||t.tribute.autocompleteMode)&&!1===t.commandEvent||t.tribute.isActive&&8===e.keyCode)&&t.tribute.showMenuFor(this,!0)}}},{key:"shouldDeactivate",value:function(t){if(!this.tribute.isActive)return!1;if(0===this.tribute.current.mentionText.length){var n=!1;return e.keys().forEach((function(e){t.keyCode===e.key&&(n=!0)})),!n}return!1}},{key:"getKeyCode",value:function(t,e,n){var i=t.tribute,s=i.range.getTriggerInfo(!1,i.hasTrailingSpace,!0,i.allowSpaces,i.autocompleteMode);return!!s&&s.mentionTriggerChar.charCodeAt(0)}},{key:"updateSelection",value:function(t){this.tribute.current.element=t;var e=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);e&&(this.tribute.current.selectedPath=e.mentionSelectedPath,this.tribute.current.mentionText=e.mentionText,this.tribute.current.selectedOffset=e.mentionSelectedOffset)}},{key:"callbacks",value:function(){var t=this;return{triggerChar:function(e,n,i){var s=t.tribute;s.current.trigger=i;var o=s.collection.find((function(t){return t.trigger===i}));s.current.collection=o,s.current.mentionText.length>=s.current.collection.menuShowMinLength&&s.inputEvent&&s.showMenuFor(n,!0)},enter:function(e,n){t.tribute.isActive&&t.tribute.current.filteredItems&&(e.preventDefault(),e.stopPropagation(),setTimeout((function(){t.tribute.selectItemAtIndex(t.tribute.menuSelected,e),t.tribute.hideMenu()}),0))},escape:function(e,n){t.tribute.isActive&&(e.preventDefault(),e.stopPropagation(),t.tribute.isActive=!1,t.tribute.hideMenu())},tab:function(e,n){t.callbacks().enter(e,n)},space:function(e,n){t.tribute.isActive&&(t.tribute.spaceSelectsMatch?t.callbacks().enter(e,n):t.tribute.allowSpaces||(e.stopPropagation(),setTimeout((function(){t.tribute.hideMenu(),t.tribute.isActive=!1}),0)))},up:function(e,n){if(t.tribute.isActive&&t.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();var i=t.tribute.current.filteredItems.length,s=t.tribute.menuSelected;i>s&&s>0?(t.tribute.menuSelected--,t.setActiveLi()):0===s&&(t.tribute.menuSelected=i-1,t.setActiveLi(),t.tribute.menu.scrollTop=t.tribute.menu.scrollHeight)}},down:function(e,n){if(t.tribute.isActive&&t.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();var i=t.tribute.current.filteredItems.length-1,s=t.tribute.menuSelected;i>s?(t.tribute.menuSelected++,t.setActiveLi()):i===s&&(t.tribute.menuSelected=0,t.setActiveLi(),t.tribute.menu.scrollTop=0)}},delete:function(e,n){t.tribute.isActive&&t.tribute.current.mentionText.length<1?t.tribute.hideMenu():t.tribute.isActive&&t.tribute.showMenuFor(n)}}}},{key:"setActiveLi",value:function(t){var e=this.tribute.menu.querySelectorAll("li"),n=e.length>>>0;t&&(this.tribute.menuSelected=parseInt(t));for(var i=0;i<n;i++){var s=e[i];if(i===this.tribute.menuSelected){s.classList.add(this.tribute.current.collection.selectClass);var o=s.getBoundingClientRect(),a=this.tribute.menu.getBoundingClientRect();if(o.bottom>a.bottom){var r=o.bottom-a.bottom;this.tribute.menu.scrollTop+=r}else if(o.top<a.top){var l=a.top-o.top;this.tribute.menu.scrollTop-=l}}else s.classList.remove(this.tribute.current.collection.selectClass)}}},{key:"getFullHeight",value:function(t,e){var n=t.getBoundingClientRect().height;if(e){var i=t.currentStyle||window.getComputedStyle(t);return n+parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return n}}],[{key:"keys",value:function(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}}]),e}(),o=function(){function e(n){t(this,e),this.tribute=n,this.tribute.menuEvents=this,this.menu=this.tribute.menu}return n(e,[{key:"bind",value:function(t){var e=this;this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce((function(){e.tribute.isActive&&e.tribute.showMenuFor(e.tribute.current.element,!1)}),300,!1),this.windowResizeEvent=this.debounce((function(){e.tribute.isActive&&e.tribute.range.positionMenuAtCaret(!0)}),300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}},{key:"unbind",value:function(t){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}},{key:"debounce",value:function(t,e,n){var i,s=arguments,o=this;return function(){var a=o,r=s,l=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||t.apply(a,r)}),e),l&&t.apply(a,r)}}}]),e}(),a=function(){function e(n){t(this,e),this.tribute=n,this.tribute.range=this}return n(e,[{key:"getDocument",value:function(){var t;return this.tribute.current.collection&&(t=this.tribute.current.collection.iframe),t?t.contentWindow.document:document}},{key:"positionMenuAtCaret",value:function(t){var e,n=this,i=this.tribute.current,s=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==s){if(!this.tribute.positionMenu)return void(this.tribute.menu.style.cssText="display: block;");e=this.isContentEditable(i.element)?this.getContentEditableCaretPosition(s.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,s.mentionPosition),this.tribute.menu.style.cssText="top: ".concat(e.top,"px;\n                                     left: ").concat(e.left,"px;\n                                     right: ").concat(e.right,"px;\n                                     bottom: ").concat(e.bottom,"px;\n                                     position: absolute;\n                                     display: block;"),"auto"===e.left&&(this.tribute.menu.style.left="auto"),"auto"===e.top&&(this.tribute.menu.style.top="auto"),t&&this.scrollIntoView(),window.setTimeout((function(){var i={width:n.tribute.menu.offsetWidth,height:n.tribute.menu.offsetHeight},s=n.isMenuOffScreen(e,i),o=window.innerWidth>i.width&&(s.left||s.right),a=window.innerHeight>i.height&&(s.top||s.bottom);(o||a)&&(n.tribute.menu.style.cssText="display: none",n.positionMenuAtCaret(t))}),0)}else this.tribute.menu.style.cssText="display: none"}},{key:"selectElement",value:function(t,e,n){var i,s=t;if(e)for(var o=0;o<e.length;o++){if(void 0===(s=s.childNodes[e[o]]))return;for(;s.length<n;)n-=s.length,s=s.nextSibling;0!==s.childNodes.length||s.length||(s=s.previousSibling)}var a=this.getWindowSelection();(i=this.getDocument().createRange()).setStart(s,n),i.setEnd(s,n),i.collapse(!0);try{a.removeAllRanges()}catch(t){}a.addRange(i),t.focus()}},{key:"replaceTriggerText",value:function(t,e,n,i,s){var o=this.getTriggerInfo(!0,n,e,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(void 0!==o){var a=this.tribute.current,r=new CustomEvent("tribute-replaced",{detail:{item:s,instance:a,context:o,event:i}});if(this.isContentEditable(a.element)){t+="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";var l=o.mentionPosition+o.mentionText.length;this.tribute.autocompleteMode||(l+=o.mentionTriggerChar.length),this.pasteHtml(t,o.mentionPosition,l)}else{var c=this.tribute.current.element,u="string"==typeof this.tribute.replaceTextSuffix?this.tribute.replaceTextSuffix:" ";t+=u;var d=o.mentionPosition,p=o.mentionPosition+o.mentionText.length+u.length;this.tribute.autocompleteMode||(p+=o.mentionTriggerChar.length-1),c.value=c.value.substring(0,d)+t+c.value.substring(p,c.value.length),c.selectionStart=d+t.length,c.selectionEnd=d+t.length}a.element.dispatchEvent(new CustomEvent("input",{bubbles:!0})),a.element.dispatchEvent(r)}}},{key:"pasteHtml",value:function(t,e,n){var i,s;s=this.getWindowSelection(),(i=this.getDocument().createRange()).setStart(s.anchorNode,e),i.setEnd(s.anchorNode,n),i.deleteContents();var o=this.getDocument().createElement("div");o.innerHTML=t;for(var a,r,l=this.getDocument().createDocumentFragment();a=o.firstChild;)r=l.appendChild(a);i.insertNode(l),r&&((i=i.cloneRange()).setStartAfter(r),i.collapse(!0),s.removeAllRanges(),s.addRange(i))}},{key:"getWindowSelection",value:function(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}},{key:"getNodePositionInParent",value:function(t){if(null===t.parentNode)return 0;for(var e=0;e<t.parentNode.childNodes.length;e++)if(t.parentNode.childNodes[e]===t)return e}},{key:"getContentEditableSelectedPath",value:function(t){var e=this.getWindowSelection(),n=e.anchorNode,i=[];if(null!=n){for(var s,o=n.contentEditable;null!==n&&"true"!==o;)s=this.getNodePositionInParent(n),i.push(s),null!==(n=n.parentNode)&&(o=n.contentEditable);return i.reverse(),{selected:n,path:i,offset:e.getRangeAt(0).startOffset}}}},{key:"getTextPrecedingCurrentSelection",value:function(){var t=this.tribute.current,e="";if(this.isContentEditable(t.element)){var n=this.getWindowSelection().anchorNode;if(null!=n){var i=n.textContent,s=this.getWindowSelection().getRangeAt(0).startOffset;i&&s>=0&&(e=i.substring(0,s))}}else{var o=this.tribute.current.element;if(o){var a=o.selectionStart;o.value&&a>=0&&(e=o.value.substring(0,a))}}return e}},{key:"getLastWordInText",value:function(t){var e=(t=t.replace(/\u00A0/g," ")).split(/\s+/);return e[e.length-1].trim()}},{key:"getTriggerInfo",value:function(t,e,n,i,s){var o,a,r,l=this,c=this.tribute.current;if(this.isContentEditable(c.element)){var u=this.getContentEditableSelectedPath(c);u&&(o=u.selected,a=u.path,r=u.offset)}else o=this.tribute.current.element;var d=this.getTextPrecedingCurrentSelection(),p=this.getLastWordInText(d);if(s)return{mentionPosition:d.length-p.length,mentionText:p,mentionSelectedElement:o,mentionSelectedPath:a,mentionSelectedOffset:r};if(null!=d){var f,h=-1;if(this.tribute.collection.forEach((function(t){var e=t.trigger,i=t.requireLeadingSpace?l.lastIndexWithLeadingSpace(d,e):d.lastIndexOf(e);i>h&&(h=i,f=e,n=t.requireLeadingSpace)})),h>=0&&(0===h||!n||/[\xA0\s]/g.test(d.substring(h-1,h)))){var m=d.substring(h+f.length,d.length);f=d.substring(h,h+f.length);var v=m.substring(0,1),g=m.length>0&&(" "===v||" "===v);e&&(m=m.trim());var b=i?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=b.test(m),!g&&(t||!b.test(m)))return{mentionPosition:h,mentionText:m,mentionSelectedElement:o,mentionSelectedPath:a,mentionSelectedOffset:r,mentionTriggerChar:f}}}}},{key:"lastIndexWithLeadingSpace",value:function(t,e){for(var n=t.split("").reverse().join(""),i=-1,s=0,o=t.length;s<o;s++){for(var a=s===t.length-1,r=/\s/.test(n[s+1]),l=!0,c=e.length-1;c>=0;c--)if(e[c]!==n[s-c]){l=!1;break}if(l&&(a||r)){i=t.length-1-s;break}}return i}},{key:"isContentEditable",value:function(t){return"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName}},{key:"isMenuOffScreen",value:function(t,e){var n=window.innerWidth,i=window.innerHeight,s=document.documentElement,o=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),a=(window.pageYOffset||s.scrollTop)-(s.clientTop||0),r="number"==typeof t.top?t.top:a+i-t.bottom-e.height,l="number"==typeof t.right?t.right:t.left+e.width,c="number"==typeof t.bottom?t.bottom:t.top+e.height,u="number"==typeof t.left?t.left:o+n-t.right-e.width;return{top:r<Math.floor(a),right:l>Math.ceil(o+n),bottom:c>Math.ceil(a+i),left:u<Math.floor(o)}}},{key:"getMenuDimensions",value:function(){var t={width:null,height:null};return this.tribute.menu.style.cssText="top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;",t.width=this.tribute.menu.offsetWidth,t.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",t}},{key:"getTextAreaOrInputUnderlinePosition",value:function(t,e,n){var i=null!==window.mozInnerScreenX,s=this.getDocument().createElement("div");s.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(s);var o=s.style,a=window.getComputedStyle?getComputedStyle(t):t.currentStyle;o.whiteSpace="pre-wrap","INPUT"!==t.nodeName&&(o.wordWrap="break-word"),o.position="absolute",o.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach((function(t){o[t]=a[t]})),i?(o.width="".concat(parseInt(a.width)-2,"px"),t.scrollHeight>parseInt(a.height)&&(o.overflowY="scroll")):o.overflow="hidden",s.textContent=t.value.substring(0,e),"INPUT"===t.nodeName&&(s.textContent=s.textContent.replace(/\s/g," "));var r=this.getDocument().createElement("span");r.textContent=t.value.substring(e)||".",s.appendChild(r);var l=t.getBoundingClientRect(),c=document.documentElement,u=(window.pageXOffset||c.scrollLeft)-(c.clientLeft||0),d=(window.pageYOffset||c.scrollTop)-(c.clientTop||0),p=0,f=0;this.menuContainerIsBody&&(p=l.top,f=l.left);var h={top:p+d+r.offsetTop+parseInt(a.borderTopWidth)+parseInt(a.fontSize)-t.scrollTop,left:f+u+r.offsetLeft+parseInt(a.borderLeftWidth)},m=window.innerWidth,v=window.innerHeight,g=this.getMenuDimensions(),b=this.isMenuOffScreen(h,g);b.right&&(h.right=m-h.left,h.left="auto");var x=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(b.bottom){var w=x-(v-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);h.bottom=w+(v-l.top-r.offsetTop),h.top="auto"}return(b=this.isMenuOffScreen(h,g)).left&&(h.left=m>g.width?u+m-g.width:u,delete h.right),b.top&&(h.top=v>g.height?d+v-g.height:d,delete h.bottom),this.getDocument().body.removeChild(s),h}},{key:"getContentEditableCaretPosition",value:function(t){var e,n=this.getWindowSelection();(e=this.getDocument().createRange()).setStart(n.anchorNode,t),e.setEnd(n.anchorNode,t),e.collapse(!1);var i=e.getBoundingClientRect(),s=document.documentElement,o=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),a=(window.pageYOffset||s.scrollTop)-(s.clientTop||0),r={left:i.left+o,top:i.top+i.height+a},l=window.innerWidth,c=window.innerHeight,u=this.getMenuDimensions(),d=this.isMenuOffScreen(r,u);d.right&&(r.left="auto",r.right=l-i.left-o);var p=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(d.bottom){var f=p-(c-(this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect()).top);r.top="auto",r.bottom=f+(c-i.top)}return(d=this.isMenuOffScreen(r,u)).left&&(r.left=l>u.width?o+l-u.width:o,delete r.right),d.top&&(r.top=c>u.height?a+c-u.height:a,delete r.bottom),this.menuContainerIsBody||(r.left=r.left?r.left-this.tribute.menuContainer.offsetLeft:r.left,r.top=r.top?r.top-this.tribute.menuContainer.offsetTop:r.top),r}},{key:"scrollIntoView",value:function(t){var e,n=this.menu;if(void 0!==n){for(;void 0===e||0===e.height;)if(0===(e=n.getBoundingClientRect()).height&&(void 0===(n=n.childNodes[0])||!n.getBoundingClientRect))return;var i=e.top,s=i+e.height;if(i<0)window.scrollTo(0,window.pageYOffset+e.top-20);else if(s>window.innerHeight){var o=window.pageYOffset+e.top-20;o-window.pageYOffset>100&&(o=window.pageYOffset+100);var a=window.pageYOffset-(window.innerHeight-s);a>o&&(a=o),window.scrollTo(0,a)}}}},{key:"menuContainerIsBody",get:function(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}}]),e}(),r=function(){function e(n){t(this,e),this.tribute=n,this.tribute.search=this}return n(e,[{key:"simpleFilter",value:function(t,e){var n=this;return e.filter((function(e){return n.test(t,e)}))}},{key:"test",value:function(t,e){return null!==this.match(t,e)}},{key:"match",value:function(t,e,n){n=n||{},e.length;var i=n.pre||"",s=n.post||"",o=n.caseSensitive&&e||e.toLowerCase();if(n.skip)return{rendered:e,score:0};t=n.caseSensitive&&t||t.toLowerCase();var a=this.traverse(o,t,0,0,[]);return a?{rendered:this.render(e,a.cache,i,s),score:a.score}:null}},{key:"traverse",value:function(t,e,n,i,s){if(e.length===i)return{score:this.calculateScore(s),cache:s.slice()};if(!(t.length===n||e.length-i>t.length-n)){for(var o,a,r=e[i],l=t.indexOf(r,n);l>-1;){if(s.push(l),a=this.traverse(t,e,l+1,i+1,s),s.pop(),!a)return o;(!o||o.score<a.score)&&(o=a),l=t.indexOf(r,l+1)}return o}}},{key:"calculateScore",value:function(t){var e=0,n=1;return t.forEach((function(i,s){s>0&&(t[s-1]+1===i?n+=n+1:n=1),e+=n})),e}},{key:"render",value:function(t,e,n,i){var s=t.substring(0,e[0]);return e.forEach((function(o,a){s+=n+t[o]+i+t.substring(o+1,e[a+1]?e[a+1]:t.length)})),s}},{key:"filter",value:function(t,e,n){var i=this;return n=n||{},e.reduce((function(e,s,o,a){var r=s;n.extract&&((r=n.extract(s))||(r=""));var l=i.match(t,r,n);return null!=l&&(e[e.length]={string:l.rendered,score:l.score,index:o,original:s}),e}),[]).sort((function(t,e){return e.score-t.score||t.index-e.index}))}}]),e}();return function(){function e(n){var i,l=this,c=n.values,u=void 0===c?null:c,d=n.iframe,p=void 0===d?null:d,f=n.selectClass,h=void 0===f?"highlight":f,m=n.containerClass,v=void 0===m?"tribute-container":m,g=n.itemClass,b=void 0===g?"":g,x=n.trigger,w=void 0===x?"@":x,_=n.autocompleteMode,y=void 0!==_&&_,C=n.selectTemplate,k=void 0===C?null:C,S=n.menuItemTemplate,M=void 0===S?null:S,T=n.lookup,E=void 0===T?"key":T,A=n.fillAttr,P=void 0===A?"value":A,L=n.collection,I=void 0===L?null:L,R=n.menuContainer,$=void 0===R?null:R,O=n.noMatchTemplate,N=void 0===O?null:O,U=n.requireLeadingSpace,D=void 0===U||U,j=n.allowSpaces,H=void 0!==j&&j,F=n.replaceTextSuffix,z=void 0===F?null:F,B=n.positionMenu,W=void 0===B||B,V=n.spaceSelectsMatch,q=void 0!==V&&V,K=n.searchOpts,Y=void 0===K?{}:K,G=n.menuItemLimit,J=void 0===G?null:G,X=n.menuShowMinLength,Q=void 0===X?0:X;if(t(this,e),this.autocompleteMode=y,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=$,this.allowSpaces=H,this.replaceTextSuffix=z,this.positionMenu=W,this.hasTrailingSpace=!1,this.spaceSelectsMatch=q,this.autocompleteMode&&(w="",H=!1),u)this.collection=[{trigger:w,iframe:p,selectClass:h,containerClass:v,itemClass:b,selectTemplate:(k||e.defaultSelectTemplate).bind(this),menuItemTemplate:(M||e.defaultMenuItemTemplate).bind(this),noMatchTemplate:(i=N,"string"==typeof i?""===i.trim()?null:i:"function"==typeof i?i.bind(l):N||function(){return"<li>No Match Found!</li>"}.bind(l)),lookup:E,fillAttr:P,values:u,requireLeadingSpace:D,searchOpts:Y,menuItemLimit:J,menuShowMinLength:Q}];else{if(!I)throw new Error("[Tribute] No collection specified.");this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=I.map((function(t){return{trigger:t.trigger||w,iframe:t.iframe||p,selectClass:t.selectClass||h,containerClass:t.containerClass||v,itemClass:t.itemClass||b,selectTemplate:(t.selectTemplate||e.defaultSelectTemplate).bind(l),menuItemTemplate:(t.menuItemTemplate||e.defaultMenuItemTemplate).bind(l),noMatchTemplate:function(t){return"string"==typeof t?""===t.trim()?null:t:"function"==typeof t?t.bind(l):N||function(){return"<li>No Match Found!</li>"}.bind(l)}(N),lookup:t.lookup||E,fillAttr:t.fillAttr||P,values:t.values,requireLeadingSpace:t.requireLeadingSpace,searchOpts:t.searchOpts||Y,menuItemLimit:t.menuItemLimit||J,menuShowMinLength:t.menuShowMinLength||Q}}))}new a(this),new s(this),new o(this),new r(this)}return n(e,[{key:"triggers",value:function(){return this.collection.map((function(t){return t.trigger}))}},{key:"attach",value:function(t){if(!t)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t.get()),t.constructor===NodeList||t.constructor===HTMLCollection||t.constructor===Array)for(var e=t.length,n=0;n<e;++n)this._attach(t[n]);else this._attach(t)}},{key:"_attach",value:function(t){t.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+t.nodeName),this.ensureEditable(t),this.events.bind(t),t.setAttribute("data-tribute",!0)}},{key:"ensureEditable",value:function(t){if(-1===e.inputTypes().indexOf(t.nodeName)){if(!t.contentEditable)throw new Error("[Tribute] Cannot bind to "+t.nodeName);t.contentEditable=!0}}},{key:"createMenu",value:function(t){var e=this.range.getDocument().createElement("div"),n=this.range.getDocument().createElement("ul");return e.className=t,e.appendChild(n),this.menuContainer?this.menuContainer.appendChild(e):this.range.getDocument().body.appendChild(e)}},{key:"showMenuFor",value:function(t,e){var n=this;if(!this.isActive||this.current.element!==t||this.current.mentionText!==this.currentMentionTextSnapshot){this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),t.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");var i=function(t){if(n.isActive){var i=n.search.filter(n.current.mentionText,t,{pre:n.current.collection.searchOpts.pre||"<span>",post:n.current.collection.searchOpts.post||"</span>",skip:n.current.collection.searchOpts.skip,extract:function(t){if("string"==typeof n.current.collection.lookup)return t[n.current.collection.lookup];if("function"==typeof n.current.collection.lookup)return n.current.collection.lookup(t,n.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});n.current.collection.menuItemLimit&&(i=i.slice(0,n.current.collection.menuItemLimit)),n.current.filteredItems=i;var s=n.menu.querySelector("ul");if(n.range.positionMenuAtCaret(e),!i.length){var o=new CustomEvent("tribute-no-match",{detail:n.menu});return n.current.element.dispatchEvent(o),void("function"==typeof n.current.collection.noMatchTemplate&&!n.current.collection.noMatchTemplate()||!n.current.collection.noMatchTemplate?n.hideMenu():"function"==typeof n.current.collection.noMatchTemplate?s.innerHTML=n.current.collection.noMatchTemplate():s.innerHTML=n.current.collection.noMatchTemplate)}s.innerHTML="";var a=n.range.getDocument().createDocumentFragment();i.forEach((function(t,e){var i=n.range.getDocument().createElement("li");i.setAttribute("data-index",e),i.className=n.current.collection.itemClass,i.addEventListener("mousemove",(function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,s=!1,o=void 0;try{for(var a,r=t[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){s=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(n._findLiTarget(t.target),2),i=(e[0],e[1]);0!==t.movementY&&n.events.setActiveLi(i)})),n.menuSelected===e&&i.classList.add(n.current.collection.selectClass),i.innerHTML=n.current.collection.menuItemTemplate(t),a.appendChild(i)})),s.appendChild(a)}};"function"==typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,i):i(this.current.collection.values)}}},{key:"_findLiTarget",value:function(t){if(!t)return[];var e=t.getAttribute("data-index");return e?[t,e]:this._findLiTarget(t.parentNode)}},{key:"showMenuForCollection",value:function(t,e){t!==document.activeElement&&this.placeCaretAtEnd(t),this.current.collection=this.collection[e||0],this.current.externalTrigger=!0,this.current.element=t,t.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(t,this.current.collection.trigger),this.showMenuFor(t)}},{key:"placeCaretAtEnd",value:function(t){if(t.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else if(void 0!==document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(t),i.collapse(!1),i.select()}}},{key:"insertTextAtCursor",value:function(t){var e,n;(n=(e=window.getSelection()).getRangeAt(0)).deleteContents();var i=document.createTextNode(t);n.insertNode(i),n.selectNodeContents(i),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}},{key:"insertAtCaret",value:function(t,e){var n=t.scrollTop,i=t.selectionStart,s=t.value.substring(0,i),o=t.value.substring(t.selectionEnd,t.value.length);t.value=s+e+o,i+=e.length,t.selectionStart=i,t.selectionEnd=i,t.focus(),t.scrollTop=n}},{key:"hideMenu",value:function(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}},{key:"selectItemAtIndex",value:function(t,e){if("number"==typeof(t=parseInt(t))&&!isNaN(t)){var n=this.current.filteredItems[t],i=this.current.collection.selectTemplate(n);null!==i&&this.replaceText(i,e,n)}}},{key:"replaceText",value:function(t,e,n){this.range.replaceTriggerText(t,!0,!0,e,n)}},{key:"_append",value:function(t,e,n){if("function"==typeof t.values)throw new Error("Unable to append to values, as it is a function.");t.values=n?e:t.values.concat(e)}},{key:"append",value:function(t,e,n){var i=parseInt(t);if("number"!=typeof i)throw new Error("please provide an index for the collection to update.");var s=this.collection[i];this._append(s,e,n)}},{key:"appendCurrent",value:function(t,e){if(!this.isActive)throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,t,e)}},{key:"detach",value:function(t){if(!t)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&t instanceof jQuery&&(t=t.get()),t.constructor===NodeList||t.constructor===HTMLCollection||t.constructor===Array)for(var e=t.length,n=0;n<e;++n)this._detach(t[n]);else this._detach(t)}},{key:"_detach",value:function(t){var e=this;this.events.unbind(t),t.tributeMenu&&this.menuEvents.unbind(t.tributeMenu),setTimeout((function(){t.removeAttribute("data-tribute"),e.isActive=!1,t.tributeMenu&&t.tributeMenu.remove()}))}},{key:"isActive",get:function(){return this._isActive},set:function(t){if(this._isActive!=t&&(this._isActive=t,this.current.element)){var e=new CustomEvent("tribute-active-".concat(t));this.current.element.dispatchEvent(e)}}}],[{key:"defaultSelectTemplate",value:function(t){return void 0===t?"".concat(this.current.collection.trigger).concat(this.current.mentionText):this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+t.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+t.original[this.current.collection.fillAttr]}},{key:"defaultMenuItemTemplate",value:function(t){return t.string}},{key:"inputTypes",value:function(){return["TEXTAREA","INPUT"]}}]),e}()}()},"5aja":function(t,e,n){"use strict";var i=n("1gDp"),s={props:{status:{type:Object},profile:{type:Object},backToStatus:{type:Boolean,default:!1}},components:{"context-menu":i.a},data:function(){return{ids:[],config:window.App.config,tributeSettings:{collection:[{trigger:"@",menuShowMinLength:2,values:function(t,e){axios.get("/api/compose/v0/search/mention",{params:{q:t}}).then((function(t){e(t.data)})).catch((function(t){console.log(t)}))}},{trigger:"#",menuShowMinLength:2,values:function(t,e){axios.get("/api/compose/v0/search/hashtag",{params:{q:t}}).then((function(t){e(t.data)})).catch((function(t){console.log(t)}))}}]},replies:[],replyId:null,replyText:"",replyNsfw:!1,replySending:!1,pagination:{},ctxMenuStatus:!1,emoji:window.App.util.emoji}},beforeMount:function(){this.fetchComments()},methods:{commentNavigateBack:function(t){if(this.backToStatus)window.location.href=this.statusUrl(this.status);else{$("nav").show(),$("footer").show(),$(".mobile-footer-spacer").attr("style","display:block"),$(".mobile-footer").attr("style","display:block"),this.$emit("current-layout","feed");window.history.pushState({},"","/")}},trimCaption:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return _.truncate(t,{length:e})},replyFocus:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!=$("body").hasClass("loggedIn")){if(!this.status.comments_disabled){this.replyToIndex=e,this.replyingToId=t.id,this.replyingToUsername=t.account.username,this.reply_to_profile_id=t.account.id;var i=t.account.local?"@"+t.account.username+" ":"@"+t.account.acct+" ";1==n&&(this.replyText=i),this.$refs.replyModal.show(),setTimeout((function(){$(".replyModalTextarea").focus()}),500)}}else this.redirect("/login?next="+encodeURIComponent(window.location.pathname))},commentSubmit:function(t,e){var n=this;this.replySending=!0;var i=t.id,s=this.replyText,o=this.config.uploader.max_caption_length;if(s.length>o)return this.replySending=!1,void swal("Comment Too Long","Please make sure your comment is "+o+" characters or less.","error");axios.post("/i/comment",{item:i,comment:s,sensitive:this.replyNsfw}).then((function(t){n.replyText="",n.replies.push(t.data.entity),n.$refs.replyModal.hide()})),this.replySending=!1},timeAgo:function(t){return App.util.format.timeAgo(t)},fetchComments:function(){var t=this;console.log("Fetching comments...");var e="/api/v2/comments/"+this.status.account.id+"/status/"+this.status.id;axios.get(e).then((function(e){t.replies=e.data.data,t.pagination=e.data.meta.pagination})).catch((function(t){if(t.response)switch(t.response.status){case 401:$(".postCommentsLoader .lds-ring").attr("style","width:100%").addClass("pt-4 font-weight-bold text-muted").text("Please login to view.");break;default:$(".postCommentsLoader .lds-ring").attr("style","width:100%").addClass("pt-4 font-weight-bold text-muted").text("An error occurred, cannot fetch comments. Please try again later.")}else $(".postCommentsLoader .lds-ring").attr("style","width:100%").addClass("pt-4 font-weight-bold text-muted").text("An error occurred, cannot fetch comments. Please try again later.")}))},loadMoreComments:function(){var t=this;if(1!=this.pagination.total_pages&&this.pagination.current_page!=this.pagination.total_pages){$(".load-more-link").addClass("d-none"),$(".postCommentsLoader").removeClass("d-none");var e=this.pagination.links.next;axios.get(e).then((function(e){var n=e.data.data;$(".postCommentsLoader").addClass("d-none");for(var i=0;i<n.length;i++)t.replies.unshift(n[i]);t.pagination=e.data.meta.pagination,$(".load-more-link").removeClass("d-none")}))}else $(".load-more-link").addClass("d-none")},likeReply:function(t,e){0!=$("body").hasClass("loggedIn")?axios.post("/i/like",{item:t.id}).then((function(e){t.favourites_count=e.data.count,1==t.favourited?t.favourited=!1:t.favourited=!0})).catch((function(t){swal("Error","Something went wrong, please try again later.","error")})):swal("Login","Please login to perform this action.","info")},ctxMenu:function(t){this.ctxMenuStatus=t,this.$refs.cMenu.open()},statusUrl:function(t){return 1==t.local?t.url:"/i/web/post/_/"+t.account.id+"/"+t.id},profileUrl:function(t){return 1==t.local?t.account.url:"/i/web/profile/_/"+t.account.id}}},o=(n("1kvc"),n("KHd+")),a=Object(o.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container p-0 overflow-hidden"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-md-6 offset-md-3"},[n("div",{staticClass:"card shadow-none border",staticStyle:{height:"100vh"}},[n("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[n("div",{staticClass:"cursor-pointer",on:{click:function(e){return t.commentNavigateBack(t.status.id)}}},[n("i",{staticClass:"fas fa-chevron-left fa-lg px-2"})]),t._v(" "),t._m(0),t._v(" "),t._m(1)]),t._v(" "),n("div",{staticClass:"card-body",staticStyle:{"overflow-y":"auto !important"}},[n("div",{staticClass:"media"},[n("img",{staticClass:"rounded-circle border mr-3",attrs:{src:t.status.account.avatar,width:"32px",height:"32px"}}),t._v(" "),n("div",{staticClass:"media-body"},[n("p",{staticClass:"d-flex justify-content-between align-items-top mb-0",staticStyle:{"overflow-y":"hidden"}},[n("span",{staticClass:"mr-2",staticStyle:{"font-size":"13px"}},[n("a",{staticClass:"text-dark font-weight-bold mr-1 text-break",attrs:{href:t.profileUrl(t.status),title:t.status.account.username}},[t._v(t._s(t.trimCaption(t.status.account.username,15)))]),t._v(" "),n("span",{staticClass:"text-break comment-body",staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(t.status.content)}})])])])]),t._v(" "),n("hr"),t._v(" "),t._m(2),t._v(" "),n("div",{staticClass:"postCommentsContainer d-none"},[t.replies.length?n("p",{staticClass:"mb-1 text-center load-more-link my-4"},[n("a",{staticClass:"text-dark",attrs:{href:"#",title:"Load more comments"},on:{click:function(e){return e.preventDefault(),t.loadMoreComments.apply(null,arguments)}}},[n("svg",{staticClass:"bi bi-plus-circle",staticStyle:{"font-size":"2em"},attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M8 3.5a.5.5 0 01.5.5v4a.5.5 0 01-.5.5H4a.5.5 0 010-1h3.5V4a.5.5 0 01.5-.5z","clip-rule":"evenodd"}}),t._v(" "),n("path",{attrs:{"fill-rule":"evenodd",d:"M7.5 8a.5.5 0 01.5-.5h4a.5.5 0 010 1H8.5V12a.5.5 0 01-1 0V8z","clip-rule":"evenodd"}}),t._v(" "),n("path",{attrs:{"fill-rule":"evenodd",d:"M8 15A7 7 0 108 1a7 7 0 000 14zm0 1A8 8 0 108 0a8 8 0 000 16z","clip-rule":"evenodd"}})])])]):t._e(),t._v(" "),t._l(t.replies,(function(e,i){return t.replies.length?n("div",{key:"tl"+e.id+"_"+i,staticClass:"pb-3 media"},[n("img",{staticClass:"rounded-circle border mr-3",attrs:{src:e.account.avatar,width:"32px",height:"32px"}}),t._v(" "),n("div",{staticClass:"media-body"},[1==e.sensitive?n("div",[n("span",{staticClass:"py-3"},[n("a",{staticClass:"text-dark font-weight-bold mr-3",staticStyle:{"font-size":"13px"},attrs:{href:t.profileUrl(e),title:e.account.username}},[t._v(t._s(t.trimCaption(e.account.username,15)))]),t._v(" "),n("span",{staticClass:"text-break",staticStyle:{"font-size":"13px"}},[n("span",{staticClass:"font-italic text-muted"},[t._v("This comment may contain sensitive material")]),t._v(" "),n("span",{staticClass:"text-primary cursor-pointer pl-1",on:{click:function(t){e.sensitive=!1}}},[t._v("Show")])])])]):n("div",[n("p",{staticClass:"d-flex justify-content-between align-items-top read-more mb-0",staticStyle:{"overflow-y":"hidden"}},[n("span",{staticClass:"mr-3",staticStyle:{"font-size":"13px"}},[n("a",{staticClass:"text-dark font-weight-bold mr-1 text-break",attrs:{href:t.profileUrl(e),title:e.account.username}},[t._v(t._s(t.trimCaption(e.account.username,15)))]),t._v(" "),n("span",{staticClass:"text-break comment-body",staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(e.content)}})]),t._v(" "),n("span",{staticClass:"text-right",staticStyle:{"min-width":"30px"}},[n("span",{on:{click:function(n){return t.likeReply(e,n)}}},[n("i",{class:[e.favourited?"fas fa-heart fa-sm text-danger":"far fa-heart fa-sm text-lighter"]})]),t._v(" "),n("span",{staticClass:"pl-2 text-lighter cursor-pointer",on:{click:function(n){return t.ctxMenu(e)}}},[n("span",{staticClass:"fas fa-ellipsis-v text-lighter"})])])]),t._v(" "),n("p",{staticClass:"mb-0"},[t._o(n("a",{staticClass:"text-muted mr-3 text-decoration-none small",staticStyle:{width:"20px"},attrs:{href:t.statusUrl(e)},domProps:{textContent:t._s(t.timeAgo(e.created_at))}}),0,"tl"+e.id+"_"+i),t._v(" "),e.favourites_count?n("span",{staticClass:"text-muted comment-reaction font-weight-bold mr-3 small"},[t._v(t._s(1==e.favourites_count?"1 like":e.favourites_count+" likes"))]):t._e(),t._v(" "),n("span",{staticClass:"small text-muted comment-reaction font-weight-bold cursor-pointer",on:{click:function(n){return t.replyFocus(e,i,!0)}}},[t._v("Reply")])]),t._v(" "),e.reply_count>0?n("div",{staticClass:"cursor-pointer pb-2",on:{click:function(n){return t.toggleReplies(e)}}},[n("span",{staticClass:"show-reply-bar"}),t._v(" "),n("span",{staticClass:"comment-reaction small font-weight-bold"},[t._v(t._s(e.thread?"Hide":"View")+" Replies ("+t._s(e.reply_count)+")")])]):t._e(),t._v(" "),1==e.thread?n("div",{staticClass:"comment-thread"},t._l(e.replies,(function(e,s){return n("div",{key:"cr"+e.id+"_"+i,staticClass:"py-1 media"},[n("img",{staticClass:"rounded-circle border mr-3",attrs:{src:e.account.avatar,width:"25px",height:"25px"}}),t._v(" "),n("div",{staticClass:"media-body"},[n("p",{staticClass:"d-flex justify-content-between align-items-top read-more mb-0",staticStyle:{"overflow-y":"hidden"}},[n("span",{staticClass:"mr-2",staticStyle:{"font-size":"13px"}},[n("a",{staticClass:"text-dark font-weight-bold mr-1",attrs:{href:t.profileUrl(e),title:e.account.username}},[t._v(t._s(e.account.username))]),t._v(" "),n("span",{staticClass:"text-break comment-body",staticStyle:{"word-break":"break-all"},domProps:{innerHTML:t._s(e.content)}})]),t._v(" "),n("span",[n("span",{on:{click:function(n){return t.likeReply(e,n)}}},[n("i",{class:[e.favourited?"fas fa-heart fa-sm text-danger":"far fa-heart fa-sm text-lighter"]})])])]),t._v(" "),n("p",{staticClass:"mb-0"},[t._o(n("a",{staticClass:"text-muted mr-3 text-decoration-none small",staticStyle:{width:"20px"},attrs:{href:t.statusUrl(e)},domProps:{textContent:t._s(t.timeAgo(e.created_at))}}),1,"cr"+e.id+"_"+i),t._v(" "),e.favourites_count?n("span",{staticClass:"text-muted comment-reaction font-weight-bold mr-3"},[t._v(t._s(1==e.favourites_count?"1 like":e.favourites_count+" likes"))]):t._e()])])])})),0):t._e()])])]):t._e()})),t._v(" "),t.replies.length?t._e():n("div",[n("p",{staticClass:"text-center text-muted font-weight-bold small"},[t._v("No comments yet")])])],2)]),t._v(" "),n("div",{staticClass:"card-footer mb-3"},[n("div",{staticClass:"align-middle d-flex"},[n("img",{staticClass:"rounded-circle border mr-3",attrs:{src:t.profile.avatar,width:"36",height:"36"}}),t._v(" "),n("textarea",{staticClass:"form-control rounded-pill",staticStyle:{resize:"none","overflow-y":"hidden"},attrs:{name:"comment",placeholder:"Add a comment…",autocomplete:"off",autocorrect:"off",rows:"1",maxlength:"0"},on:{click:function(e){return t.replyFocus(t.status)}}})])])])])])]),t._v(" "),n("context-menu",{ref:"cMenu",attrs:{status:t.ctxMenuStatus,profile:t.profile}}),t._v(" "),n("b-modal",{ref:"replyModal",attrs:{id:"ctx-reply-modal","hide-footer":"",centered:"",rounded:"","title-html":t.status.account?"Reply to <span class=text-dark>"+t.status.account.username+"</span>":"","title-tag":"p","title-class":"font-weight-bold text-muted",size:"md","body-class":"p-2 rounded"}},[n("div",[n("vue-tribute",{attrs:{options:t.tributeSettings}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyText,expression:"replyText"}],staticClass:"form-control replyModalTextarea",attrs:{rows:"4"},domProps:{value:t.replyText},on:{input:function(e){e.target.composing||(t.replyText=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"border-top border-bottom my-2"},[n("ul",{staticClass:"nav align-items-center emoji-reactions",staticStyle:{"overflow-x":"scroll","flex-wrap":"unset"}},t._l(t.emoji,(function(e){return n("li",{staticClass:"nav-item",on:{click:function(e){return t.emojiReaction(t.status)}}},[t._v(t._s(e))])})),0)]),t._v(" "),n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("div",[n("span",{staticClass:"pl-2 small text-muted font-weight-bold text-monospace"},[n("span",{class:[t.replyText.length>t.config.uploader.max_caption_length?"text-danger":"text-dark"]},[t._v(t._s(t.replyText.length>t.config.uploader.max_caption_length?t.config.uploader.max_caption_length-t.replyText.length:t.replyText.length))]),t._v("/"+t._s(t.config.uploader.max_caption_length)+"\n\t\t\t\t\t")])]),t._v(" "),n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"custom-control custom-switch mr-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.replyNsfw,expression:"replyNsfw"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"replyModalCWSwitch"},domProps:{checked:Array.isArray(t.replyNsfw)?t._i(t.replyNsfw,null)>-1:t.replyNsfw},on:{change:function(e){var n=t.replyNsfw,i=e.target,s=!!i.checked;if(Array.isArray(n)){var o=t._i(n,null);i.checked?o<0&&(t.replyNsfw=n.concat([null])):o>-1&&(t.replyNsfw=n.slice(0,o).concat(n.slice(o+1)))}else t.replyNsfw=s}}}),t._v(" "),n("label",{class:[t.replyNsfw?"custom-control-label font-weight-bold text-dark":"custom-control-label text-lighter"],attrs:{for:"replyModalCWSwitch"}},[t._v("Mark as NSFW")])]),t._v(" "),n("button",{staticClass:"btn btn-primary btn-sm py-2 px-4 lead text-uppercase font-weight-bold",attrs:{disabled:0==t.replyText.length},on:{click:function(e){return e.preventDefault(),t.commentSubmit(t.status,e)}}},[t._v("\n\t\t\t\t\t\t"+t._s(1==t.replySending?"POSTING":"POST")+"\n\t\t\t\t\t")])])])],1)])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{staticClass:"font-weight-bold mb-0 h5"},[this._v("Comments")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"fas fa-cog fa-lg text-white"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"postCommentsLoader text-center py-2"},[e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])])}],!1,null,"006bdd8e",null);e.a=a.exports},6:function(t,e,n){t.exports=n("KqaD")},"69ih":function(t,e,n){var i=n("pm6S");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},"7n9v":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".status-card-component .status-content {\n  font-size: 17px;\n}\n.status-card-component.status-card-sm .status-content {\n  font-size: 14px;\n}\n.status-card-component.status-card-sm .fa-lg {\n  font-size: unset;\n  line-height: unset;\n  vertical-align: unset;\n}",""])},"9tPo":function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var s,o=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(s=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")}))}},"9wGH":function(t,e,n){"use strict";n.r(e);var i={props:["status"]},s=n("KHd+"),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return 1==t.status.sensitive?n("div",[n("details",{staticClass:"details-animated"},[n("summary",[n("p",{staticClass:"mb-0 lead font-weight-bold"},[t._v(t._s(t.status.spoiler_text?t.status.spoiler_text:"CW / NSFW / Hidden Media"))]),t._v(" "),n("p",{staticClass:"font-weight-light"},[t._v("(click to show)")])]),t._v(" "),n("b-carousel",{staticStyle:{"text-shadow":"1px 1px 2px #333","background-color":"#000"},attrs:{id:t.status.id+"-carousel",controls:"","img-blank":"",background:"#ffffff",interval:0}},t._l(t.status.media_attachments,(function(t,e){return n("b-carousel-slide",{key:t.id+"-media"},[n("video",{staticClass:"embed-responsive-item",attrs:{slot:"img",preload:"none",controls:"",playsinline:"",loop:"",alt:t.description,width:"100%",height:"100%",poster:t.preview_url},slot:"img"},[n("source",{attrs:{src:t.url,type:t.mime}})])])})),1)],1)]):n("div",[n("b-carousel",{staticStyle:{"text-shadow":"1px 1px 2px #333","background-color":"#000"},attrs:{id:t.status.id+"-carousel",controls:"","img-blank":"",background:"#ffffff",interval:0}},t._l(t.status.media_attachments,(function(t,e){return n("b-carousel-slide",{key:t.id+"-media"},[n("video",{staticClass:"embed-responsive-item",attrs:{slot:"img",preload:"none",controls:"",playsinline:"",loop:"",alt:t.description,width:"100%",height:"100%",poster:t.preview_url},slot:"img"},[n("source",{attrs:{src:t.url,type:t.mime}})])])})),1)],1)}),[],!1,null,null,null);e.default=o.exports},EsHe:function(t,e,n){"use strict";n("tF69")},Hs6E:function(t,e,n){"use strict";n("69ih")},I1BE:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var s=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[n].concat(o).concat([s]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},s=0;s<this.length;s++){var o=this[s][0];"number"==typeof o&&(i[o]=!0)}for(s=0;s<t.length;s++){var a=t[s];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},JMt0:function(t,e,n){"use strict";var i=n("4KG8"),s=n.n(i),o={name:"vue-tribute",props:{options:{type:Object,required:!0}},watch:{options:{immediate:!1,deep:!0,handler:function(){var t=this;this.tribute&&setTimeout((function(){var e=t.$slots.default[0].elm;t.tribute.detach(e),setTimeout((function(){e=t.$slots.default[0].elm,t.tribute=new s.a(t.options),t.tribute.attach(e),e.tributeInstance=t.tribute}),0)}),0)}}},mounted:function(){if(void 0===s.a)throw new Error("[vue-tribute] cannot locate tributejs!");var t=this.$slots.default[0].elm;this.tribute=new s.a(this.options),this.tribute.attach(t),t.tributeInstance=this.tribute,t.addEventListener("tribute-replaced",(function(t){t.target.dispatchEvent(new Event("input",{bubbles:!0}))}))},beforeDestroy:function(){var t=this.$slots.default[0].elm;this.tribute&&this.tribute.detach(t)},render:function(t){return t("div",{staticClass:"v-tribute"},this.$slots.default)}};"undefined"!=typeof window&&window.Vue&&window.Vue.component(o.name,o),e.a=o},"KHd+":function(t,e,n){"use strict";function i(t,e,n,i,s,o,a,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}n.d(e,"a",(function(){return i}))},KhVi:function(t,e,n){"use strict";n.r(e);var i=n("JMt0"),s=n("/jad"),o=n("5aja");function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l={props:["scope","layout"],components:{VueTribute:i.a,StatusCard:s.a,CommentCard:o.a},data:function(){return{ids:[],config:window.App.config,page:2,feed:[],profile:{},min_id:0,max_id:0,suggestions:{},loading:!0,replies:[],replyId:null,modes:{mod:!1,dark:!1,notify:!0,distractionFree:!1},followers:[],followerCursor:1,followerMore:!0,following:[],followingCursor:1,followingMore:!0,lightboxMedia:!1,showSuggestions:!0,showReadMore:!0,replyStatus:{},replyText:"",replyNsfw:!1,emoji:[],showHashtagPosts:!1,hashtagPosts:[],hashtagPostsName:"",copiedEmbed:!1,showTips:!0,userStory:!1,replySending:!1,morePostsAvailable:!1,mpCount:0,mpData:!1,mpInterval:15e3,mpEnabled:!1,mpPoller:null,confirmModalTitle:"Are you sure?",confirmModalIdentifer:null,confirmModalType:!1,currentLayout:"feed",pagination:{},tributeSettings:{collection:[{trigger:"@",menuShowMinLength:2,values:function(t,e){axios.get("/api/compose/v0/search/mention",{params:{q:t}}).then((function(t){e(t.data)})).catch((function(t){console.log(t)}))}},{trigger:"#",menuShowMinLength:2,values:function(t,e){axios.get("/api/compose/v0/search/hashtag",{params:{q:t}}).then((function(t){e(t.data)})).catch((function(t){console.log(t)}))}}]},discover_min_id:0,discover_max_id:0,discover_feed:[],recentFeed:!1,recentFeedMin:null,recentFeedMax:null,reactionBar:!0,emptyFeed:!1,filters:[],showPromo:!1}},beforeMount:function(){this.fetchProfile()},mounted:function(){var t=this;!0===this.config.ab.spa&&(this.showPromo="false"!=localStorage.getItem("pf_metro_ui.exp.spa")),"false"==localStorage.getItem("pf_metro_ui.exp.rec")?this.showSuggestions=!1:this.showSuggestions=!0,"false"==localStorage.getItem("pf_metro_ui.exp.rm")?this.showReadMore=!1:this.showReadMore=!0,"false"==localStorage.getItem("metro-tips")&&(this.showTips=!1),this.$nextTick((function(){$('[data-toggle="tooltip"]').tooltip();var e=new URLSearchParams(window.location.search);if(e.has("a"))switch(e.get("a")){case"co":$("#composeModal").modal("show")}"home"!=t.scope?axios.get("/api/pixelfed/v2/filters").then((function(e){t.filters=e.data,t.fetchTimelineApi()})):t.fetchTimelineApi()}))},updated:function(){1==this.showReadMore&&pixelfed.readmore()},methods:{fetchProfile:function(){var t=this;axios.get("/api/pixelfed/v1/accounts/verify_credentials").then((function(e){t.profile=e.data,1==t.profile.is_admin&&(t.modes.mod=!0),window._sharedData.curUser=e.data,window.App.util.navatar()})).catch((function(t){swal("Oops, something went wrong","Please reload the page.","error")}))},fetchTimelineApi:function(){var t=this,e=!1;switch(this.scope){case"home":e="/api/pixelfed/v1/timelines/home";break;case"local":e="/api/pixelfed/v1/timelines/public";break;case"network":e="/api/pixelfed/v1/timelines/network"}axios.get(e,{params:{max_id:this.max_id,limit:12,recent_feed:this.recentFeed}}).then((function(e){var n,i=e.data;if(!i||!i.length)return t.loading=!1,void(t.emptyFeed=!0);t.filters.length&&(i=i.filter((function(e){return 0==t.filters.includes(e.account.id)}))),(n=t.feed).push.apply(n,a(i));var s=i.map((function(t){return t.id}));t.ids=s,t.min_id=Math.max.apply(Math,a(s)).toString(),t.max_id=Math.min.apply(Math,a(s)).toString(),t.loading=!1,t.$nextTick((function(){t.hasStory()})),setTimeout((function(){document.querySelectorAll(".timeline .card-body .comments .comment-body a").forEach((function(t,e){t.href=App.util.format.rewriteLinks(t)}))}),500)})).catch((function(t){swal("Oops, something went wrong","Please reload the page.","error")}))},infiniteTimeline:function(t){var e=this;if(this.loading)t.complete();else{this.page>40&&(this.loading=!1,t.complete());var n=!1;switch(this.scope){case"home":n="/api/pixelfed/v1/timelines/home";break;case"local":n="/api/pixelfed/v1/timelines/public";break;case"network":n="/api/pixelfed/v1/timelines/network"}axios.get(n,{params:{max_id:this.max_id,limit:6,recent_feed:this.recentFeed}}).then((function(n){if(n.data.length&&0==e.loading){var i=n.data,s=e;if(s.recentFeed&&-1!=s.ids.indexOf(i[0].id))return e.loading=!1,void t.complete();i.forEach((function(t,e){-1==s.ids.indexOf(t.id)&&(s.feed.push(t),s.ids.push(t.id))})),e.min_id=Math.max.apply(Math,a(e.ids)).toString(),e.max_id=Math.min.apply(Math,a(e.ids)).toString(),e.page+=1,t.loaded(),e.loading=!1}else t.complete()})).catch((function(n){e.loading=!1,t.complete()}))}},redirect:function(t){window.location.href=t},expRec:function(){var t=this;0!=this.config.ab.rec&&axios.get("/api/local/exp/rec").then((function(e){t.suggestions=e.data}))},expRecFollow:function(t,e){},owner:function(t){return this.profile.id===t.account.id},admin:function(){return 1==this.profile.is_admin},ownerOrAdmin:function(t){return this.owner(t)||this.admin()},hideSuggestions:function(){localStorage.setItem("pf_metro_ui.exp.rec",!1),this.showSuggestions=!1},emojiReaction:function(t){var e=event.target.innerText;0==this.replyText.length?(this.replyText=e+" ",$('textarea[name="comment"]').focus()):(this.replyText+=e+" ",$('textarea[name="comment"]').focus())},refreshSuggestions:function(){},fetchHashtagPosts:function(){var t=this;axios.get("/api/local/discover/tag/list").then((function(e){var n=e.data;if(0!=n.length){var i=n[Math.floor(Math.random(),n.length)];t.hashtagPostsName=i,axios.get("/api/v2/discover/tag",{params:{hashtag:i}}).then((function(e){e.data.tags.length>3&&(t.showHashtagPosts=!0,t.hashtagPosts=e.data.tags.splice(0,9))}))}}))},commentFocus:function(t,e){t.comments_disabled||(this.status=t,this.replies={},this.replyStatus={},this.replyText="",this.replyId=t.id,this.replyStatus=t,this.fetchStatusComments(t,""),$("nav").hide(),$("footer").hide(),$(".mobile-footer-spacer").attr("style","display:none !important"),$(".mobile-footer").attr("style","display:none !important"),this.currentLayout="comments",window.history.pushState({},"",this.statusUrl(t)))},fetchStatusComments:function(t,e){var n=this,i="/api/v2/comments/"+t.account.id+"/status/"+t.id;axios.get(i).then((function(t){n.replies=_.reverse(t.data.data),n.pagination=t.data.meta.pagination,n.replies.length>0&&$(".load-more-link").removeClass("d-none"),$(".postCommentsLoader").addClass("d-none"),$(".postCommentsContainer").removeClass("d-none")})).catch((function(t){if(t.response)switch(t.response.status){case 401:$(".postCommentsLoader .lds-ring").attr("style","width:100%").addClass("pt-4 font-weight-bold text-muted").text("Please login to view.");break;default:$(".postCommentsLoader .lds-ring").attr("style","width:100%").addClass("pt-4 font-weight-bold text-muted").text("An error occurred, cannot fetch comments. Please try again later.")}else $(".postCommentsLoader .lds-ring").attr("style","width:100%").addClass("pt-4 font-weight-bold text-muted").text("An error occurred, cannot fetch comments. Please try again later.")}))},statusUrl:function(t){return 1==t.local?t.url:"/i/web/post/_/"+t.account.id+"/"+t.id},profileUrl:function(t){return 1==t.local?t.account.url:"/i/web/profile/_/"+t.account.id},formatCount:function(t){return App.util.format.count(t)},hasStory:function(){var t=this;axios.get("/api/web/stories/v1/exists/"+this.profile.id).then((function(e){t.userStory=e.data}))},rtw:function(){var t=this;this.mpPoller=setInterval((function(){var e=!1;switch(t.mpCount++,t.mpCount>10&&(t.mpInterval=3e4),t.mpCount>50&&(t.mpInterval=3e5),t.scope){case"home":e="/api/pixelfed/v1/timelines/home";break;case"local":e="/api/pixelfed/v1/timelines/public";break;case"network":e="/api/pixelfed/v1/timelines/network"}axios.get(e,{params:{max_id:0,limit:20,recent_feed:t.recentFeed}}).then((function(e){var n=t,i=t.feed.map((function(t){return t.id})),s=e.data.filter((function(t){return t.id>n.min_id&&-1==i.indexOf(t.id)})),o=s.map((function(t){return t.id}));Math.max.apply(Math,a(o)).toString()>t.min_id&&(t.morePostsAvailable=!0,t.mpData=s)}))}),this.mpInterval)},syncNewPosts:function(){var t,e=this.mpData,n=e.map((function(t){return t.id}));this.min_id=Math.max.apply(Math,a(n)).toString(),this.max_id=Math.min.apply(Math,a(n)).toString(),(t=this.feed).unshift.apply(t,a(e)),this.morePostsAvailable=!1,this.mpData=null},toggleReplies:function(t){if(t.thread)t.thread=!1;else{if(t.replies.length>0)return void(t.thread=!0);var e="/api/v2/comments/"+t.account.id+"/status/"+t.id;axios.get(e).then((function(e){t.replies=_.reverse(e.data.data),t.thread=!0}))}},replyFocus:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!=$("body").hasClass("loggedIn")){if(!this.status.comments_disabled){this.replyToIndex=e,this.replyingToId=t.id,this.replyingToUsername=t.account.username,this.reply_to_profile_id=t.account.id;var i=t.account.local?"@"+t.account.username+" ":"@"+t.account.acct+" ";1==n&&(this.replyText=i),this.$refs.replyModal.show(),setTimeout((function(){$(".replyModalTextarea").focus()}),500)}}else this.redirect("/login?next="+encodeURIComponent(window.location.pathname))},alwaysViewOlderPosts:function(){window.localStorage.setItem("pf.feed:avop","always"),window.location.href="/"},setCurrentLayout:function(t){this.currentLayout=t},deleteStatus:function(t){this.feed=this.feed.filter((function(e){return e.id!=t}))},followedAccount:function(t){this.feed=this.feed.map((function(e){return e.account.id==t&&e.hasOwnProperty("relationship")&&0==e.relationship.following&&(e.relationship.following=!0),e}))},unfollowedAccount:function(t){this.feed=this.feed.map((function(e){return e.account.id==t&&e.hasOwnProperty("relationship")&&1==e.relationship.following&&(e.relationship.following=!1),e}))},hidePromo:function(){localStorage.setItem("pf_metro_ui.exp.spa","false"),this.showPromo=!1}},beforeDestroy:function(){clearInterval(this.mpInterval)}},c=(n("EsHe"),n("KHd+")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["feed"===t.currentLayout?n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[1==t.morePostsAvailable?n("div",{staticClass:"col-12 mt-5 pt-3 mb-3 fixed-top"},[n("p",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-dark px-4 rounded-pill font-weight-bold shadow",on:{click:t.syncNewPosts}},[t._v("Load New Posts")])])]):t._e(),t._v(" "),n("div",{staticClass:"col-md-8 col-lg-8 px-0 mb-sm-3 timeline order-2 order-md-1"},[n("div",{staticStyle:{"margin-top":"-2px"}},[t.config.features.stories?n("story-component",{attrs:{scope:t.scope}}):t._e()],1),t._v(" "),n("div",{staticClass:"pt-4"},[t.loading?n("div",{staticClass:"text-center",staticStyle:{"padding-top":"10px"}},[t._m(0)]):t._e(),t._v(" "),t._l(t.feed,(function(e,i){return n("div",{key:"feed-"+i+"-"+e.id,attrs:{"data-status-id":e.id}},[1==i&&!t.loading&&t.showPromo?n("div",{},[n("div",{staticClass:"card rounded-0 shadow-none border border-top-0 py-5"},[n("div",{staticClass:"card-body p-5 my-5"},[n("h1",[t._v("A New Experience Awaits")]),t._v(" "),n("p",{staticClass:"lead"},[t._v("Try out an early release of our new design")]),t._v(" "),n("p",{staticClass:"mb-0 d-flex align-items-center"},[n("a",{staticClass:"btn btn-primary font-weight-bold py-1 px-4 rounded-pill mr-4",attrs:{href:"/i/web"}},[t._v("Try new UI")]),t._v(" "),n("a",{staticClass:"font-weight-bold text-muted",attrs:{href:"/"},on:{click:function(e){return e.preventDefault(),t.hidePromo()}}},[t._v("Hide")])])])])]):t._e(),t._v(" "),n("status-card",{class:{"border-top":0===i},attrs:{status:e,"reaction-bar":t.reactionBar,size:"small"},on:{"status-delete":t.deleteStatus,"comment-focus":t.commentFocus,followed:t.followedAccount,unfollowed:t.unfollowedAccount}})],1)})),t._v(" "),!t.loading&&t.feed.length?n("div",[n("div",{staticClass:"card rounded-0 border-top-0 status-card rounded-0 shadow-none border"},[n("div",{staticClass:"card-body py-5 my-5"},[n("infinite-loading",{attrs:{distance:800},on:{infinite:t.infiniteTimeline}},[n("div",{attrs:{slot:"no-more"},slot:"no-more"},[t.recentFeed?n("div",[n("p",{staticClass:"text-center"},[n("i",{staticClass:"far fa-check-circle fa-8x text-lighter"})]),t._v(" "),n("p",{staticClass:"text-center h3 font-weight-light"},[t._v("You're All Caught Up!")]),t._v(" "),n("p",{staticClass:"text-center text-muted font-weight-light"},[t._v("You've seen all the new posts from the accounts you follow.")]),t._v(" "),n("p",{staticClass:"text-center mb-0"},[n("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/?a=vop"}},[t._v("View Older Posts")])]),t._v(" "),n("p",{staticClass:"text-center mb-0"},[n("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/"},on:{click:function(e){return e.preventDefault(),t.alwaysViewOlderPosts()}}},[t._v("Always show older posts on this device")])])]):n("div",[n("p",{staticClass:"text-center h3 font-weight-light"},[t._v("You've reached the end of this feed")]),t._v(" "),n("p",{staticClass:"text-center mb-0"},[n("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/discover"}},[t._v("Discover new posts and people")])])])]),t._v(" "),n("div",{attrs:{slot:"no-results"},slot:"no-results"},[t.recentFeed?n("div",[n("p",{staticClass:"text-center"},[n("i",{staticClass:"far fa-check-circle fa-8x text-lighter"})]),t._v(" "),n("p",{staticClass:"text-center h3 font-weight-light"},[t._v("You're All Caught Up!")]),t._v(" "),n("p",{staticClass:"text-center text-muted font-weight-light"},[t._v("You've seen all the new posts from the accounts you follow.")]),t._v(" "),n("p",{staticClass:"text-center mb-0"},[n("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/?a=vop"}},[t._v("View Older Posts")])]),t._v(" "),n("p",{staticClass:"text-center mb-0"},[n("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/"},on:{click:function(e){return e.preventDefault(),t.alwaysViewOlderPosts()}}},[t._v("Always show older posts on this device")])])]):n("div",[n("p",{staticClass:"text-center h3 font-weight-light"},[t._v("You've reached the end of this feed")]),t._v(" "),n("p",{staticClass:"text-center mb-0"},[n("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/discover"}},[t._v("Discover new posts and people")])])])])])],1)])]):t._e(),t._v(" "),t.loading||"home"!=t.scope||0!=t.feed.length?t._e():n("div",[n("div",{staticClass:"card rounded-0 mt-4 status-card rounded-0 shadow-none border"},["0"!=t.profile.following_count?n("div",{staticClass:"card-body py-5 my-5"},[t._m(1),t._v(" "),n("p",{staticClass:"text-center h3 font-weight-light"},[t._v("You're All Caught Up!")]),t._v(" "),n("p",{staticClass:"text-center text-muted font-weight-light"},[t._v("You've seen all the new posts from the accounts you follow.")]),t._v(" "),t._m(2),t._v(" "),n("p",{staticClass:"text-center mb-0"},[n("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/"},on:{click:function(e){return e.preventDefault(),t.alwaysViewOlderPosts()}}},[t._v("Always show older posts on this device")])])]):n("div",{staticClass:"card-body py-5 my-5"},[t._m(3),t._v(" "),n("p",{staticClass:"text-center h3 font-weight-light"},[t._v("Hello "+t._s(t.profile.username))]),t._v(" "),n("p",{staticClass:"text-center text-muted font-weight-light"},[t._v("Accounts you follow will appear in this feed.")]),t._v(" "),t._m(4),t._v(" "),n("hr"),t._v(" "),t._m(5)])])]),t._v(" "),!t.loading&&"home"==t.scope&&t.recentFeed&&t.discover_feed.length?n("div",{staticClass:"pt-3"},[t._m(6)]):t._e(),t._v(" "),t._l(t.discover_feed,(function(e,i){return!t.loading&&"home"==t.scope&&t.recentFeed&&t.discover_feed.length?n("div",{key:"discover_feed-"+i+"-"+e.id,attrs:{"data-status-id":e.id}},[n("status-card",{class:{"border-top":0===i},attrs:{status:e,recommended:!0}})],1):t._e()})),t._v(" "),!t.loading&&t.emptyFeed&&"home"!==t.scope?n("div",[t._m(7)]):t._e()],2)]),t._v(" "),n("div",{staticClass:"col-md-4 col-lg-4 my-4 order-1 order-md-2 d-none d-md-block"},[n("div",[n("div",{staticClass:"mb-4"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[n("div",{staticClass:"pb-2"},[n("div",{staticClass:"media d-flex align-items-center"},[n("a",{staticClass:"mr-3",attrs:{href:t.userStory?"/stories/"+t.profile.acct:t.profile.url}},[t.userStory?n("div",{staticClass:"has-story cursor-pointer shadow-sm",on:{click:function(e){return t.storyRedirect()}}},[n("img",{staticClass:"rounded-circle box-shadow",attrs:{src:t.profile.avatar,width:"64px",height:"64px",onerror:"this.onerror=null;this.src='/storage/avatars/default.png?v=2'",alt:"avatar"}})]):n("div",[n("img",{staticClass:"rounded-circle box-shadow",attrs:{src:t.profile.avatar,width:"64px",height:"64px",onerror:"this.onerror=null;this.src='/storage/avatars/default.png?v=2'",alt:"avatar"}})])]),t._v(" "),n("div",{staticClass:"media-body d-flex justify-content-between word-break"},[n("div",[n("p",{staticClass:"mb-0 px-0 font-weight-bold"},[n("a",{staticClass:"text-dark",attrs:{href:t.profile.url}},[t._v(t._s(t.profile.username||"loading..."))])]),t._v(" "),n("p",{staticClass:"my-0 text-muted pb-0"},[t._v(t._s(t.profile.display_name||"loading..."))])]),t._v(" "),t._m(8)])])])]),t._v(" "),n("div",{staticClass:"card-footer bg-transparent border-0 pt-0 pb-1"},[n("div",{staticClass:"d-flex justify-content-between text-center"},[n("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.redirect(t.profile.url)}}},[n("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s(t.formatCount(t.profile.statuses_count)))]),t._v(" "),n("p",{staticClass:"mb-0 small text-muted"},[t._v("Posts")])]),t._v(" "),n("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.redirect(t.profile.url+"?md=followers")}}},[n("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s(t.formatCount(t.profile.followers_count)))]),t._v(" "),n("p",{staticClass:"mb-0 small text-muted"},[t._v("Followers")])]),t._v(" "),n("span",{staticClass:"cursor-pointer",on:{click:function(e){return t.redirect(t.profile.url+"?md=following")}}},[n("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s(t.formatCount(t.profile.following_count)))]),t._v(" "),n("p",{staticClass:"mb-0 small text-muted"},[t._v("Following")])])])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.modes.notify&&!t.loading,expression:"modes.notify == true && !loading"}],staticClass:"mb-4"},[n("notification-card")],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.showSuggestions&&t.suggestions.length&&t.config.ab&&1==t.config.ab.rec,expression:"showSuggestions == true && suggestions.length && config.ab && config.ab.rec == true"}],staticClass:"mb-4"},[n("div",{staticClass:"card shadow-none border"},[n("div",{staticClass:"card-header bg-white d-flex align-items-center justify-content-between"},[n("a",{ref:"suggestionRefresh",staticClass:"small text-muted cursor-pointer",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.refreshSuggestions.apply(null,arguments)}}},[n("i",{staticClass:"fas fa-sync-alt"})]),t._v(" "),n("div",{staticClass:"small text-dark text-uppercase font-weight-bold"},[t._v("Suggestions")]),t._v(" "),n("div",{staticClass:"small text-muted cursor-pointer",on:{click:t.hideSuggestions}},[n("i",{staticClass:"fas fa-times"})])]),t._v(" "),n("div",{staticClass:"card-body pt-0"},t._l(t.suggestions,(function(e,i){return n("div",{staticClass:"media align-items-center mt-3"},[n("a",{attrs:{href:"/"+e.username}},[n("img",{staticClass:"rounded-circle mr-3",attrs:{src:e.avatar,width:"32px",height:"32px",onerror:"this.onerror=null;this.src='/storage/avatars/default.png?v=2'",alt:"avatar"}})]),t._v(" "),n("div",{staticClass:"media-body"},[n("p",{staticClass:"mb-0 font-weight-bold small"},[n("a",{staticClass:"text-decoration-none text-dark",attrs:{href:"/"+e.username}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.username)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),n("p",{staticClass:"mb-0 small text-muted"},[t._v(t._s(e.message))])]),t._v(" "),n("a",{staticClass:"font-weight-bold small",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.expRecFollow(e.id,i)}}},[t._v("Follow")])])})),0)])]),t._v(" "),t._m(9)])])])]):t._e(),t._v(" "),t.replyStatus&&t.replyStatus.hasOwnProperty("id")?n("comment-card",{attrs:{status:t.replyStatus,profile:t.profile},on:{"current-layout":t.setCurrentLayout}}):t._e(),t._v(" "),n("div",{staticClass:"modal-stack"},[n("b-modal",{ref:"replyModal",attrs:{id:"ctx-reply-modal","hide-footer":"",centered:"",rounded:"","title-html":t.replyStatus.account?"Reply to <span class=text-dark>"+t.replyStatus.account.username+"</span>":"","title-tag":"p","title-class":"font-weight-bold text-muted",size:"md","body-class":"p-2 rounded"}},[n("div",[n("vue-tribute",{attrs:{options:t.tributeSettings}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyText,expression:"replyText"}],staticClass:"form-control replyModalTextarea",attrs:{rows:"4"},domProps:{value:t.replyText},on:{input:function(e){e.target.composing||(t.replyText=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"border-top border-bottom my-2"},[n("ul",{staticClass:"nav align-items-center emoji-reactions",staticStyle:{"overflow-x":"scroll","flex-wrap":"unset"}},t._l(t.emoji,(function(e){return n("li",{staticClass:"nav-item",on:{click:function(e){return t.emojiReaction(t.status)}}},[t._v(t._s(e))])})),0)]),t._v(" "),n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("div",[n("span",{staticClass:"pl-2 small text-muted font-weight-bold text-monospace"},[n("span",{class:[t.replyText.length>t.config.uploader.max_caption_length?"text-danger":"text-dark"]},[t._v(t._s(t.replyText.length>t.config.uploader.max_caption_length?t.config.uploader.max_caption_length-t.replyText.length:t.replyText.length))]),t._v("/"+t._s(t.config.uploader.max_caption_length)+"\n\t\t\t\t\t\t\t")])]),t._v(" "),n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"custom-control custom-switch mr-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.replyNsfw,expression:"replyNsfw"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"replyModalCWSwitch"},domProps:{checked:Array.isArray(t.replyNsfw)?t._i(t.replyNsfw,null)>-1:t.replyNsfw},on:{change:function(e){var n=t.replyNsfw,i=e.target,s=!!i.checked;if(Array.isArray(n)){var o=t._i(n,null);i.checked?o<0&&(t.replyNsfw=n.concat([null])):o>-1&&(t.replyNsfw=n.slice(0,o).concat(n.slice(o+1)))}else t.replyNsfw=s}}}),t._v(" "),n("label",{class:[t.replyNsfw?"custom-control-label font-weight-bold text-dark":"custom-control-label text-lighter"],attrs:{for:"replyModalCWSwitch"}},[t._v("Mark as NSFW")])]),t._v(" "),n("button",{staticClass:"btn btn-primary btn-sm py-2 px-4 lead text-uppercase font-weight-bold",attrs:{disabled:0==t.replyText.length},on:{click:function(e){return e.preventDefault(),t.commentSubmit(t.status,e)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(1==t.replySending?"POSTING":"POST")+"\n\t\t\t\t\t\t\t")])])])],1)]),t._v(" "),n("b-modal",{ref:"ctxStatusModal",attrs:{id:"ctx-status-modal","hide-header":"","hide-footer":"",centered:"",rounded:"",size:"xl","body-class":"list-group-flush p-0 m-0 rounded"}})],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-border",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-center"},[e("i",{staticClass:"far fa-check-circle fa-8x text-lighter"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-center mb-0"},[e("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/?a=vop"}},[this._v("View Older Posts")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-center"},[e("i",{staticClass:"far fa-smile fa-8x text-lighter"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-center mb-0"},[e("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/discover"}},[this._v("Discover new posts and people")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center pt-5"},[e("h1",[this._v("A New Experience Awaits")]),this._v(" "),e("p",{staticClass:"lead"},[this._v("Try out an early release of our new design")]),this._v(" "),e("p",{staticClass:"mb-0 d-flex align-items-center justify-content-center"},[e("a",{staticClass:"btn btn-primary font-weight-bold py-1 px-4 rounded-pill mr-4",attrs:{href:"/i/web"}},[this._v("Try new UI")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"h5 font-weight-bold py-3 d-flex justify-content-between align-items-center"},[e("span",[this._v("Suggested Posts")]),this._v(" "),e("a",{staticClass:"small font-weight-bold",attrs:{href:"/?a=vop"}},[this._v("Older Posts")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card rounded-0 mt-3 status-card rounded-0 shadow-none border"},[e("div",{staticClass:"card-body py-5 my-5"},[e("p",{staticClass:"text-center"},[e("i",{staticClass:"fas fa-battery-empty fa-8x text-lighter"})]),this._v(" "),e("p",{staticClass:"text-center h3 font-weight-light"},[this._v("empty_timeline.jpg")]),this._v(" "),e("p",{staticClass:"text-center text-muted font-weight-light"},[this._v("We cannot find any posts for this timeline.")]),this._v(" "),e("p",{staticClass:"text-center mb-0"},[e("a",{staticClass:"btn btn-link font-weight-bold px-4",attrs:{href:"/discover"}},[this._v("Discover new posts and people")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ml-2"},[e("a",{staticClass:"text-muted",attrs:{href:"/settings/home"}},[e("i",{staticClass:"fas fa-cog fa-lg"}),this._v(" "),e("span",{staticClass:"sr-only"},[this._v("User Settings")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("div",{staticClass:"container px-0 pb-5"},[n("p",{staticClass:"mb-2 small text-justify"},[n("a",{staticClass:"text-lighter pr-2",attrs:{href:"/site/about"}},[t._v("About")]),t._v(" "),n("a",{staticClass:"text-lighter pr-2",attrs:{href:"/site/help"}},[t._v("Help")]),t._v(" "),n("a",{staticClass:"text-lighter pr-2",attrs:{href:"/site/language"}},[t._v("Language")]),t._v(" "),n("a",{staticClass:"text-lighter pr-2",attrs:{href:"/discover/places"}},[t._v("Places")]),t._v(" "),n("a",{staticClass:"text-lighter pr-2",attrs:{href:"/site/privacy"}},[t._v("Privacy")]),t._v(" "),n("a",{staticClass:"text-lighter pr-2",attrs:{href:"/site/terms"}},[t._v("Terms")])]),t._v(" "),n("p",{staticClass:"mb-0 text-uppercase text-muted small"},[n("a",{staticClass:"text-lighter",attrs:{href:"https://pixelfed.org",rel:"noopener",title:"","data-toggle":"tooltip"}},[t._v("Powered by Pixelfed")])])])])}],!1,null,"7f94e974",null);e.default=u.exports},KqaD:function(t,e,n){Vue.component("notification-card",n("x6yo").default),Vue.component("photo-presenter",n("d+I4").default),Vue.component("video-presenter",n("2Jpm").default),Vue.component("photo-album-presenter",n("Mrqh").default),Vue.component("video-album-presenter",n("9wGH").default),Vue.component("mixed-album-presenter",n("exej").default),Vue.component("post-menu",n("yric").default),Vue.component("timeline",n("KhVi").default),Vue.component("announcements-card",n("hoKv").default),Vue.component("story-component",n("oDnJ").default)},Lajv:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.emoji-reactions .nav-item[data-v-006bdd8e] {\n\tfont-size: 1.2rem;\n\tpadding: 9px;\n\tcursor: pointer;\n}\n.emoji-reactions[data-v-006bdd8e]::-webkit-scrollbar {\n\twidth: 0px;\n\theight: 0px;\n\tbackground: transparent;\n}\n",""])},Lp1U:function(t,e,n){"use strict";n("na7+")},Mrqh:function(t,e,n){"use strict";n.r(e);var i=n("NFb6"),s=n.n(i),o={props:["status"],data:function(){return{sensitive:this.status.sensitive,cursor:0}},created:function(){},beforeDestroy:function(){},methods:{toggleContentWarning:function(t){this.$emit("togglecw")},toggleLightbox:function(t){s()({el:t.target})},altText:function(t){var e=t.description;return e||"Photo was not tagged with any alt text."},keypressNavigation:function(t){var e=this.$refs.carousel;if("37"==t.keyCode){t.preventDefault();e.advancePage("backward"),e.$emit("navigation-click","backward")}if("39"==t.keyCode){t.preventDefault();e.advancePage("forward"),e.$emit("navigation-click","forward")}}}},a=(n("Hs6E"),n("KHd+")),r=Object(a.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return 1==t.status.sensitive?n("div",{staticClass:"content-label-wrapper"},[n("div",{staticClass:"text-light content-label"},[t._m(0),t._v(" "),n("p",{staticClass:"h4 font-weight-bold text-center"},[t._v("\n\t\t\tSensitive Content\n\t\t")]),t._v(" "),n("p",{staticClass:"text-center py-2"},[t._v("\n\t\t\t"+t._s(t.status.spoiler_text?t.status.spoiler_text:"This album may contain sensitive content.")+"\n\t\t")]),t._v(" "),n("p",{staticClass:"mb-0"},[n("button",{staticClass:"btn btn-outline-light btn-block btn-sm font-weight-bold",on:{click:function(e){return t.toggleContentWarning()}}},[t._v("See Post")])])]),t._v(" "),n("blur-hash-image",{attrs:{width:"32",height:"32",punch:1,hash:t.status.media_attachments[0].blurhash,alt:t.altText(t.status)}})],1):n("div",{staticClass:"w-100 h-100 p-0"},[n("carousel",{ref:"carousel",staticClass:"p-0 m-0",attrs:{centerMode:!0,loop:!1,"per-page":1,paginationPosition:"bottom-overlay",paginationActiveColor:"#3897f0",paginationColor:"#dbdbdb"}},t._l(t.status.media_attachments,(function(e,i){return n("slide",{key:"px-carousel-"+e.id+"-"+i,staticStyle:{background:"#000",display:"flex","align-items":"center"},attrs:{title:e.description}},[n("img",{class:e.filter_class+" img-fluid w-100 p-0",attrs:{src:e.url,alt:t.altText(e),loading:"lazy",onerror:"this.onerror=null;this.src='/storage/no-preview.png'"}}),t._v(" "),!t.status.sensitive&&t.sensitive?n("p",{staticStyle:{"margin-top":"0",padding:"10px",color:"#fff","font-size":"10px","text-align":"right",position:"absolute",top:"0",right:"0","border-top-left-radius":"5px",cursor:"pointer",background:"linear-gradient(0deg, rgba(0,0,0,0.5), rgba(0,0,0,0.5))"},on:{click:function(e){t.status.sensitive=!0}}},[n("i",{staticClass:"fas fa-eye-slash fa-lg"})]):t._e(),t._v(" "),t.status.media_attachments[0].license?n("p",{staticStyle:{"margin-bottom":"0",padding:"0 5px",color:"#fff","font-size":"10px","text-align":"right",position:"absolute",bottom:"0",right:"0","border-top-left-radius":"5px",background:"linear-gradient(0deg, rgba(0,0,0,0.5), rgba(0,0,0,0.5))"}},[n("a",{staticClass:"font-weight-bold text-light",attrs:{href:t.status.url}},[t._v("Photo")]),t._v(" by "),n("a",{staticClass:"font-weight-bold text-light",attrs:{href:t.status.account.url}},[t._v("@"+t._s(t.status.account.username))]),t._v(" licensed under "),n("a",{staticClass:"font-weight-bold text-light",attrs:{href:t.status.media_attachments[0].license.url}},[t._v(t._s(t.status.media_attachments[0].license.title))])]):t._e()])})),1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-center"},[e("i",{staticClass:"far fa-eye-slash fa-2x"})])}],!1,null,"1b12221c",null);e.default=r.exports},N0po:function(t,e,n){var i=n("US+e");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},NFb6:function(t,e){var n,i,s,o,a,r,l,c,u,d,p,f,h,m,v,g,b,x,w,_,y,C,k,S,M,T,E,A,P,L,I,R,$,O=[],N={},U="appendChild",D="createElement",j="removeChild";function H(){var t=n.getBoundingClientRect(),e=t.top,i=t.left,a=t.width,r=t.height;return"transform:translate3D("+(i-(s.clientWidth-a)/2)+"px, "+(e-(s.clientHeight-r)/2)+"px, 0) scale3D("+n.clientWidth/o.clientWidth+", "+n.clientHeight/o.clientHeight+", 0)"}function F(t){var e=L.length-1;if(!h){if(t>0&&P===e||t<0&&!P){if(!$.loop)return X(a,""),void setTimeout(X,9,a,"animation:"+(t>0?"bpl":"bpf")+" .3s;transition:transform .35s");P=t>0?-1:e+1}if([(P=Math.max(0,Math.min(P+t,e)))-1,P,P+1].forEach((function(t){if(t=Math.max(0,Math.min(t,e)),!N[t]){var n=L[t].src,i=document[D]("IMG");i.addEventListener("load",K.bind(null,n)),i.src=n,N[t]=i}})),N[P].complete)return z(t);h=!0,X(v,"opacity:.4;"),s[U](v),N[P].onload=function(){y&&z(t)},N[P].onerror=function(){L[P]={error:"Error loading image"},y&&z(t)}}}function z(t){h&&(s[j](v),h=!1);var e=L[P];if(e.error)alert(e.error);else{var i=s.querySelector("img:last-of-type");X(a=o=N[P],"animation:"+(t>0?"bpfl":"bpfr")+" .35s;transition:transform .35s"),X(i,"animation:"+(t>0?"bpfol":"bpfor")+" .35s both"),s[U](a),e.el&&(n=e.el)}I.innerHTML=P+1+"/"+L.length,q(L[P].caption),T&&T([a,L[P]])}function B(){var t,e,n=.95*window.innerHeight,i=.95*window.innerWidth,s=n/i,o=$.dimensions||[1920,1080],a=o[0],r=o[1],l=r/a;l>s?e=(t=Math.min(r,n))/l:t=(e=Math.min(a,i))*l,c.style.cssText+="width:"+e+"px;height:"+t+"px;"}function W(t){~[1,4].indexOf(o.readyState)?(Y(),setTimeout((function(){o.play()}),99)):o.error?Y(t):m=setTimeout(W,35,t)}function V(t){$.noLoader||(t&&X(v,"top:"+n.offsetTop+"px;left:"+n.offsetLeft+"px;height:"+n.clientHeight+"px;width:"+n.clientWidth+"px"),n.parentElement[t?U:j](v),h=t)}function q(t){t&&(b.innerHTML=t),X(g,"opacity:"+(t?"1;pointer-events:auto":"0"))}function K(t){!~O.indexOf(t)&&O.push(t)}function Y(t){if(h&&V(),S&&S(),"string"==typeof t)return J(),$.onError?$.onError():alert("Error: The requested "+t+" could not be loaded.");k&&K(d),o.style.cssText+=H(),X(s,"opacity:1;pointer-events:auto"),M&&(M=setTimeout(M,410)),_=!0,y=!!L,setTimeout((function(){o.style.cssText+="transition:transform .35s;transform:none",x&&setTimeout(q,250,x)}),60)}function G(t){var e=t?t.target:s,n=[g,w,r,l,b,A,E,v];e.blur(),C||~n.indexOf(e)||(o.style.cssText+=H(),X(s,"pointer-events:auto"),setTimeout(J,350),clearTimeout(M),_=!1,C=!0)}function J(){if((o===c?u:o).removeAttribute("src"),document.body[j](s),s[j](o),X(s,""),X(o,""),q(!1),y){for(var t=s.querySelectorAll("img"),e=0;e<t.length;e++)s[j](t[e]);h&&s[j](v),s[j](I),y=L=!1,N={},R||s[j](E),R||s[j](A),a.onload=Y,a.onerror=Y.bind(null,"image")}$.onClose&&$.onClose(),C=h=!1}function X(t,e){t.style.cssText=e}t.exports=function(t){var e;return i||function(){var t,e;function n(t){var e=document[D]("button");return e.className=t,e.innerHTML='<svg viewBox="0 0 48 48"><path d="M28 24L47 5a3 3 0 1 0-4-4L24 20 5 1a3 3 0 1 0-4 4l19 19L1 43a3 3 0 1 0 4 4l19-19 19 19a3 3 0 0 0 4 0v-4L28 24z"/></svg>',e}function d(t,e){var n=document[D]("button");return n.className="bp-lr",n.innerHTML='<svg viewBox="0 0 129 129" height="70" fill="#fff"><path d="M88.6 121.3c.8.8 1.8 1.2 2.9 1.2s2.1-.4 2.9-1.2a4.1 4.1 0 0 0 0-5.8l-51-51 51-51a4.1 4.1 0 0 0-5.8-5.8l-54 53.9a4.1 4.1 0 0 0 0 5.8l54 53.9z"/></svg>',X(n,e),n.onclick=function(e){e.stopPropagation(),F(t)},n}var f=document[D]("STYLE");f.innerHTML="#bp_caption,#bp_container{bottom:0;left:0;right:0;position:fixed;opacity:0}#bp_container>*,#bp_loader{position:absolute;right:0;z-index:10}#bp_container,#bp_caption,#bp_container svg{pointer-events:none}#bp_container{top:0;z-index:9999;background:rgba(0,0,0,.7);opacity:0;transition:opacity .35s}#bp_loader{top:0;left:0;bottom:0;display:flex;align-items:center;cursor:wait;background:0;z-index:9}#bp_loader svg{width:50%;max-width:300px;max-height:50%;margin:auto;animation:bpturn 1s infinite linear}#bp_aud,#bp_container img,#bp_sv,#bp_vid{user-select:none;max-height:96%;max-width:96%;top:0;bottom:0;left:0;margin:auto;box-shadow:0 0 3em rgba(0,0,0,.4);z-index:-1}#bp_sv{background:#111}#bp_sv svg{width:66px}#bp_caption{font-size:.9em;padding:1.3em;background:rgba(15,15,15,.94);color:#fff;text-align:center;transition:opacity .3s}#bp_aud{width:650px;top:calc(50% - 20px);bottom:auto;box-shadow:none}#bp_count{left:0;right:auto;padding:14px;color:rgba(255,255,255,.7);font-size:22px;cursor:default}#bp_container button{position:absolute;border:0;outline:0;background:0;cursor:pointer;transition:all .1s}#bp_container>.bp-x{padding:0;height:41px;width:41px;border-radius:100%;top:8px;right:14px;opacity:.8;line-height:1}#bp_container>.bp-x:focus,#bp_container>.bp-x:hover{background:rgba(255,255,255,.2)}.bp-x svg,.bp-xc svg{height:21px;width:20px;fill:#fff;vertical-align:top;}.bp-xc svg{width:16px}#bp_container .bp-xc{left:2%;bottom:100%;padding:9px 20px 7px;background:#d04444;border-radius:2px 2px 0 0;opacity:.85}#bp_container .bp-xc:focus,#bp_container .bp-xc:hover{opacity:1}.bp-lr{top:50%;top:calc(50% - 130px);padding:99px 0;width:6%;background:0;border:0;opacity:.4;transition:opacity .1s}.bp-lr:focus,.bp-lr:hover{opacity:.8}@keyframes bpf{50%{transform:translatex(15px)}100%{transform:none}}@keyframes bpl{50%{transform:translatex(-15px)}100%{transform:none}}@keyframes bpfl{0%{opacity:0;transform:translatex(70px)}100%{opacity:1;transform:none}}@keyframes bpfr{0%{opacity:0;transform:translatex(-70px)}100%{opacity:1;transform:none}}@keyframes bpfol{0%{opacity:1;transform:none}100%{opacity:0;transform:translatex(-70px)}}@keyframes bpfor{0%{opacity:1;transform:none}100%{opacity:0;transform:translatex(70px)}}@keyframes bpturn{0%{transform:none}100%{transform:rotate(360deg)}}@media (max-width:600px){.bp-lr{font-size:15vw}}",document.head[U](f),(s=document[D]("DIV")).id="bp_container",s.onclick=G,p=n("bp-x"),s[U](p),"ontouchend"in window&&window.visualViewport&&(R=!0,s.ontouchstart=function(n){var i=n.touches,s=n.changedTouches;e=i.length>1,t=s[0].pageX},s.ontouchend=function(n){var i=n.changedTouches;if(y&&!e&&window.visualViewport.scale<=1){var s=i[0].pageX-t;s<-30&&F(1),s>30&&F(-1)}});a=document[D]("IMG"),(r=document[D]("VIDEO")).id="bp_vid",r.setAttribute("playsinline",!0),r.controls=!0,r.loop=!0,(l=document[D]("audio")).id="bp_aud",l.controls=!0,l.loop=!0,(I=document[D]("span")).id="bp_count",(g=document[D]("DIV")).id="bp_caption",(w=n("bp-xc")).onclick=q.bind(null,!1),g[U](w),b=document[D]("SPAN"),g[U](b),s[U](g),E=d(1,"transform:scalex(-1)"),A=d(-1,"left:0;right:auto"),(v=document[D]("DIV")).id="bp_loader",v.innerHTML='<svg viewbox="0 0 32 32" fill="#fff" opacity=".8"><path d="M16 0a16 16 0 0 0 0 32 16 16 0 0 0 0-32m0 4a12 12 0 0 1 0 24 12 12 0 0 1 0-24" fill="#000" opacity=".5"/><path d="M16 0a16 16 0 0 1 16 16h-4A12 12 0 0 0 16 4z"/></svg>',(c=document[D]("DIV")).id="bp_sv",(u=document[D]("IFRAME")).setAttribute("allowfullscreen",!0),u.allow="autoplay; fullscreen",u.onload=function(){return c[j](v)},X(u,"border:0;position:absolute;height:100%;width:100%;left:0;top:0"),c[U](u),a.onload=Y,a.onerror=Y.bind(null,"image"),window.addEventListener("resize",(function(){y||h&&V(!0),o===c&&B()})),document.addEventListener("keyup",(function(t){var e=t.keyCode;27===e&&_&&G(),y&&(39===e&&F(1),37===e&&F(-1),38===e&&F(10),40===e&&F(-10))})),document.addEventListener("keydown",(function(t){y&&~[37,38,39,40].indexOf(t.keyCode)&&t.preventDefault()})),document.addEventListener("focus",(function(t){_&&!s.contains(t.target)&&(t.stopPropagation(),p.focus())}),!0),i=!0}(),h&&(clearTimeout(m),J()),$=t,f=t.ytSrc||t.vimeoSrc,S=t.animationStart,M=t.animationEnd,T=t.onChangeImage,n=t.el,k=!1,x=n.getAttribute("data-caption"),t.gallery?function(t,e){var i=$.galleryAttribute||"data-bp";if(Array.isArray(t))L=t,x=t[P=e||0].caption;else{var r=(L=[].slice.call("string"==typeof t?document.querySelectorAll(t+" ["+i+"]"):t)).indexOf(n);P=0===e||e?e:-1!==r?r:0,L=L.map((function(t){return{el:t,src:t.getAttribute(i),caption:t.getAttribute("data-caption")}}))}k=!0,d=L[P].src,!~O.indexOf(d)&&V(!0),L.length>1?(s[U](I),I.innerHTML=P+1+"/"+L.length,R||(s[U](E),s[U](A))):L=!1;(o=a).src=d}(t.gallery,t.position):f||t.iframeSrc?(o=c,function(){var t;$.ytSrc?t="https://www.youtube"+($.ytNoCookie?"-nocookie":"")+".com/embed/"+f+"?html5=1&rel=0&playsinline=1&autoplay=1":$.vimeoSrc?t="https://player.vimeo.com/video/"+f+"?autoplay=1":$.iframeSrc&&(t=$.iframeSrc);X(v,""),c[U](v),u.src=t,B(),setTimeout(Y,9)}()):t.imgSrc?(k=!0,d=t.imgSrc,!~O.indexOf(d)&&V(!0),(o=a).src=d):t.audio?(V(!0),(o=l).src=t.audio,W("audio file")):t.vidSrc?(V(!0),t.dimensions&&X(r,"width:"+t.dimensions[0]+"px"),e=t.vidSrc,Array.isArray(e)?(o=r.cloneNode(),e.forEach((function(t){var e=document[D]("SOURCE");e.src=t,e.type="video/"+t.match(/.(\w+)$/)[1],o[U](e)}))):(o=r).src=e,W("video")):(o=a).src="IMG"===n.tagName?n.src:window.getComputedStyle(n).backgroundImage.replace(/^url|[(|)|'|"]/g,""),s[U](o),document.body[U](s),{close:G,opts:$,updateDimensions:B,display:o,next:function(){return F(1)},prev:function(){return F(-1)}}}},OCAn:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.content-label-wrapper[data-v-5e63aaf2] {\n\tposition: relative;\n}\n.content-label[data-v-5e63aaf2] {\n\tmargin: 0;\n\tposition: absolute;\n\ttop:50%;\n\tleft:50%;\n\ttransform: translate(-50%, -50%);\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 2;\n\tbackground: rgba(0, 0, 0, 0.2)\n}\n",""])},RePV:function(t,e,n){"use strict";n("dfRi")},"US+e":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.fade-enter-active[data-v-267be4b0], .fade-leave-active[data-v-267be4b0] {\n  transition: opacity .5s;\n}\n.fade-enter[data-v-267be4b0], .fade-leave-to[data-v-267be4b0] {\n  opacity: 0;\n}\n",""])},Uq1p:function(t,e,n){var i=n("kyJc");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},VBPq:function(t,e,n){var i=n("hvct");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},"aET+":function(t,e,n){var i,s,o={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=i.apply(this,arguments)),s}),r=function(t,e){return e?e.querySelector(t):document.querySelector(t)},l=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var i=r.call(this,t,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),c=null,u=0,d=[],p=n("9tPo");function f(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=o[i.id];if(s){s.refs++;for(var a=0;a<s.parts.length;a++)s.parts[a](i.parts[a]);for(;a<i.parts.length;a++)s.parts.push(x(i.parts[a],e))}else{var r=[];for(a=0;a<i.parts.length;a++)r.push(x(i.parts[a],e));o[i.id]={id:i.id,refs:1,parts:r}}}}function h(t,e){for(var n=[],i={},s=0;s<t.length;s++){var o=t[s],a=e.base?o[0]+e.base:o[0],r={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(r):n.push(i[a]={id:a,parts:[r]})}return n}function m(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=d[d.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),d.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=l(t.insertAt.before,n);n.insertBefore(e,s)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=d.indexOf(t);e>=0&&d.splice(e,1)}function g(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return n.nc}();i&&(t.attrs.nonce=i)}return b(e,t.attrs),m(t,e),e}function b(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function x(t,e){var n,i,s,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var a=u++;n=c||(c=g(e)),i=y.bind(null,n,a,!1),s=y.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),m(t,e),e}(e),i=k.bind(null,n,e),s=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(e),i=C.bind(null,n),s=function(){v(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return f(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var a=n[s];(r=o[a.id]).refs--,i.push(r)}t&&f(h(t,e),e);for(s=0;s<i.length;s++){var r;if(0===(r=i[s]).refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete o[r.id]}}}};var w,_=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function y(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=_(e,s);else{var o=document.createTextNode(s),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function C(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function k(t,e,n){var i=n.css,s=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&s;(e.convertToAbsoluteUrls||o)&&(i=p(i)),s&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var a=new Blob([i],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(a),r&&URL.revokeObjectURL(r)}},bmA5:function(t,e,n){"use strict";n("VBPq")},"ch/V":function(t,e,n){"use strict";n("Uq1p")},"d+I4":function(t,e,n){"use strict";n.r(e);var i=n("NFb6"),s=n.n(i),o={props:["status"],data:function(){return{sensitive:this.status.sensitive}},mounted:function(){},methods:{altText:function(t){var e=t.media_attachments[0].description;return e||"Photo was not tagged with any alt text."},toggleContentWarning:function(t){this.$emit("togglecw")},toggleLightbox:function(t){s()({el:t.target})},width:function(){if(this.status.media_attachments[0].meta&&this.status.media_attachments[0].meta.original&&this.status.media_attachments[0].meta.original.width)return this.status.media_attachments[0].meta.original.width},height:function(){if(this.status.media_attachments[0].meta&&this.status.media_attachments[0].meta.original&&this.status.media_attachments[0].meta.original.height)return this.status.media_attachments[0].meta.original.height}}},a=(n("ch/V"),n("KHd+")),r=Object(a.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return 1==t.status.sensitive?n("div",{staticClass:"content-label-wrapper"},[n("div",{staticClass:"text-light content-label"},[t._m(0),t._v(" "),n("p",{staticClass:"h4 font-weight-bold text-center"},[t._v("\n\t\t\tSensitive Content\n\t\t")]),t._v(" "),n("p",{staticClass:"text-center py-2"},[t._v("\n\t\t\t"+t._s(t.status.spoiler_text?t.status.spoiler_text:"This post may contain sensitive content.")+"\n\t\t")]),t._v(" "),n("p",{staticClass:"mb-0"},[n("button",{staticClass:"btn btn-outline-light btn-block btn-sm font-weight-bold",on:{click:function(e){return t.toggleContentWarning()}}},[t._v("See Post")])])]),t._v(" "),n("blur-hash-image",{attrs:{width:"32",height:"32",punch:1,hash:t.status.media_attachments[0].blurhash,alt:t.altText(t.status)}})],1):n("div",[n("div",{staticStyle:{position:"relative"},attrs:{title:t.status.media_attachments[0].description}},[n("img",{staticClass:"card-img-top",attrs:{src:t.status.media_attachments[0].url,loading:"lazy",alt:t.altText(t.status),width:t.width(),height:t.height(),onerror:"this.onerror=null;this.src='/storage/no-preview.png'"},on:{click:function(e){return e.preventDefault(),t.toggleLightbox.apply(null,arguments)}}}),t._v(" "),!t.status.sensitive&&t.sensitive?n("p",{staticStyle:{"margin-top":"0",padding:"10px",color:"#fff","font-size":"10px","text-align":"right",position:"absolute",top:"0",right:"0","border-top-left-radius":"5px",cursor:"pointer",background:"linear-gradient(0deg, rgba(0,0,0,0.5), rgba(0,0,0,0.5))"},on:{click:function(e){t.status.sensitive=!0}}},[n("i",{staticClass:"fas fa-eye-slash fa-lg"})]):t._e(),t._v(" "),t.status.media_attachments[0].license?n("p",{staticStyle:{"margin-bottom":"0",padding:"0 5px",color:"#fff","font-size":"10px","text-align":"right",position:"absolute",bottom:"0",right:"0","border-top-left-radius":"5px",background:"linear-gradient(0deg, rgba(0,0,0,0.5), rgba(0,0,0,0.5))"}},[n("a",{staticClass:"font-weight-bold text-light",attrs:{href:t.status.url}},[t._v("Photo")]),t._v(" by "),n("a",{staticClass:"font-weight-bold text-light",attrs:{href:t.status.account.url}},[t._v("@"+t._s(t.status.account.username))]),t._v(" licensed under "),n("a",{staticClass:"font-weight-bold text-light",attrs:{href:t.status.media_attachments[0].license.url}},[t._v(t._s(t.status.media_attachments[0].license.title))])]):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"text-center"},[e("i",{staticClass:"far fa-eye-slash fa-2x"})])}],!1,null,"77d48172",null);e.default=r.exports},dfRi:function(t,e,n){var i=n("7n9v");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},exej:function(t,e,n){"use strict";n.r(e);var i={props:["status"]},s=n("KHd+"),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return 1==t.status.sensitive?n("div",[n("details",{staticClass:"details-animated"},[n("summary",[n("p",{staticClass:"mb-0 lead font-weight-bold"},[t._v(t._s(t.status.spoiler_text?t.status.spoiler_text:"CW / NSFW / Hidden Media"))]),t._v(" "),n("p",{staticClass:"font-weight-light"},[t._v("(click to show)")])]),t._v(" "),n("b-carousel",{staticStyle:{"text-shadow":"1px 1px 2px #333","background-color":"#000"},attrs:{id:t.status.id+"-carousel",controls:"","img-blank":"",background:"#ffffff",interval:0}},t._l(t.status.media_attachments,(function(e,i){return n("b-carousel-slide",{key:e.id+"-media"},["Video"==e.type?n("video",{staticClass:"embed-responsive-item",attrs:{slot:"img",preload:"none",controls:"",playsinline:"",loop:"",alt:e.description,width:"100%",height:"100%",poster:e.preview_url},slot:"img"},[n("source",{attrs:{src:e.url,type:e.mime}})]):"Image"==e.type?n("div",{attrs:{slot:"img",title:e.description},slot:"img"},[n("img",{class:e.filter_class+" d-block img-fluid w-100",attrs:{src:e.url,alt:e.description,loading:"lazy",onerror:"this.onerror=null;this.src='/storage/no-preview.png'"}})]):n("p",{staticClass:"text-center p-0 font-weight-bold text-white"},[t._v("Error: Problem rendering preview.")])])})),1)],1)]):n("div",{staticClass:"w-100 h-100 p-0"},[n("carousel",{ref:"carousel",staticClass:"p-0 m-0",attrs:{centerMode:!0,loop:!1,"per-page":1,paginationPosition:"bottom-overlay",paginationActiveColor:"#3897f0",paginationColor:"#dbdbdb"}},t._l(t.status.media_attachments,(function(e,i){return n("slide",{key:"px-carousel-"+e.id+"-"+i,staticClass:"w-100 h-100 d-block mx-auto text-center",staticStyle:{background:"#000",display:"flex","align-items":"center"}},["Video"==e.type?n("video",{staticClass:"embed-responsive-item",attrs:{preload:"none",controls:"",loop:"",title:e.description,width:"100%",height:"100%",poster:e.preview_url}},[n("source",{attrs:{src:e.url,type:e.mime}})]):"Image"==e.type?n("div",{attrs:{title:e.description}},[n("img",{class:e.filter_class+" img-fluid w-100",attrs:{src:e.url,alt:e.description,loading:"lazy",onerror:"this.onerror=null;this.src='/storage/no-preview.png'"}})]):n("p",{staticClass:"text-center p-0 font-weight-bold text-white"},[t._v("Error: Problem rendering preview.")])])})),1)],1)}),[],!1,null,null,null);e.default=o.exports},hoKv:function(t,e,n){"use strict";n.r(e);var i={data:function(){return{announcements:[],announcement:{},cursor:0,showNext:!0,showPrev:!1}},mounted:function(){this.fetchAnnouncements()},updated:function(){$('[data-toggle="tooltip"]').tooltip()},methods:{fetchAnnouncements:function(){var t=this,e=JSON.parse(window.localStorage.getItem("metro-tips-closed"));axios.get("/api/pixelfed/v1/newsroom/timeline").then((function(n){t.announcements=n.data.filter((function(t){return!e||-1==e.indexOf(t.id)})),t.announcement=t.announcements[0],1==t.announcements.length&&(t.showNext=!1)}))},loadNext:function(){this.showNext&&(this.cursor+=1,this.announcement=this.announcements[this.cursor],this.cursor+1==this.announcements.length&&(this.showNext=!1),this.cursor>=1&&(this.showPrev=!0))},loadPrev:function(){this.showPrev&&(this.cursor-=1,this.announcement=this.announcements[this.cursor],0==this.cursor&&(this.showPrev=!1),this.cursor<this.announcements.length&&(this.showNext=!0))},closeNewsroomPost:function(t,e){var n="metro-tips-closed",i=[],s=window.localStorage.getItem(n);s&&(i=JSON.parse(s)),i.push(t),window.localStorage.setItem(n,JSON.stringify(i)),this.newsroomPosts=this.newsroomPosts.filter((function(e){return e.id!==t})),0==this.newsroomPosts.length?this.showTips=!1:this.newsroomPost=[this.newsroomPosts[0]]},close:function(){window.localStorage.setItem("metro-tips",!1),this.$emit("show-tips",!1)},markAsRead:function(){var t=this;axios.post("/api/pixelfed/v1/newsroom/markasread",{id:this.announcement.id}).then((function(e){var n=t.cursor;t.announcements.splice(n,1),t.announcement=t.announcements[0],t.cursor=0,t.showPrev=!1,t.showNext=t.announcements.length>1})).catch((function(t){swal("Oops, Something went wrong","There was a problem with your request, please try again later.","error")}))}}},s=(n("t+jv"),n("KHd+")),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade"}},[t.announcements.length?n("div",{staticClass:"card border shadow-none mb-3"},[n("div",{staticClass:"card-header text-muted bg-white"},[n("i",{staticClass:"fas fa-bullhorn mr-2"}),t._v(" "),n("span",{staticClass:"text-weight-light"},[t._v("ANNOUNCEMENTS")]),t._v(" "),n("span",{staticClass:"float-right cursor-pointer",attrs:{title:"Close"},on:{click:t.close}},[n("i",{staticClass:"fas fa-times text-lighter"})])]),t._v(" "),n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title mb-0"},[n("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.announcement.title))])]),t._v(" "),n("p",{staticClass:"card-text"},[n("span",{staticStyle:{"font-size":"13px"}},[t._v(t._s(t.announcement.summary))])]),t._v(" "),n("p",{staticClass:"d-flex align-items-center justify-content-between mb-0"},[t.announcement.url?n("a",{staticClass:"small font-weight-bold mb-0",attrs:{href:t.announcement.url}},[t._v("Read more")]):n("span"),t._v(" "),n("span",[n("span",{class:[t.showPrev?"btn btn-outline-secondary btn-sm py-0":"btn btn-outline-secondary btn-sm py-0 disabled"],attrs:{disabled:0==t.showPrev},on:{click:function(e){return t.loadPrev()}}},[n("i",{staticClass:"fas fa-chevron-left fa-sm"})]),t._v(" "),n("span",{staticClass:"btn btn-outline-success btn-sm py-0 mx-1",attrs:{title:"Mark as Read","data-toggle":"tooltip","data-placement":"bottom"},on:{click:function(e){return t.markAsRead()}}},[n("i",{staticClass:"fas fa-check fa-sm"})]),t._v(" "),n("span",{class:[t.showNext?"btn btn-outline-secondary btn-sm py-0":"btn btn-outline-secondary btn-sm py-0 disabled"],attrs:{disabled:0==t.showNext},on:{click:function(e){return t.loadNext()}}},[n("i",{staticClass:"fas fa-chevron-right fa-sm"})])])])])]):t._e()])],1)}),[],!1,null,"267be4b0",null);e.default=o.exports},hvct:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".card[data-v-c1448eda] {\n  height: 122px;\n}\n.ring[data-v-c1448eda] {\n  display: block;\n  width: 66px;\n  height: 66px;\n  border-radius: 50%;\n  padding: 3px;\n  background: radial-gradient(ellipse at 70% 70%, #ee583f 8%, #d92d77 42%, #bd3381 58%);\n}\n.ring.remote[data-v-c1448eda] {\n  background: radial-gradient(ellipse at 70% 70%, #f64f59 8%, #c471ed 42%, #12c2e9 58%);\n}\n.ring.not-seen[data-v-c1448eda] {\n  opacity: 0.55;\n  background: #ccc;\n}\n.ring img[data-v-c1448eda] {\n  background: #fff;\n  padding: 3px;\n}\n.ring.new[data-v-c1448eda] {\n  background: none;\n  width: 70px;\n  height: 70px;\n  border: dashed 4px #d92d77;\n}\n.ring.new img[data-v-c1448eda] {\n  width: 56px;\n  height: 56px;\n}\n.scrolly[data-v-c1448eda] {\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n  overflow-y: scroll;\n}\n.scrolly[data-v-c1448eda]::-webkit-scrollbar {\n  display: none;\n}",""])},iKvg:function(t,e,n){var i=n("x784");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},"kT+A":function(t,e,n){var i=n("Lajv");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},kyJc:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.card-img-top[data-v-77d48172] {\n  border-top-left-radius: 0 !important;\n  border-top-right-radius: 0 !important;\n}\n.content-label-wrapper[data-v-77d48172] {\n\tposition: relative;\n}\n.content-label[data-v-77d48172] {\n\tmargin: 0;\n\tposition: absolute;\n\ttop:50%;\n\tleft:50%;\n\ttransform: translate(-50%, -50%);\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 2;\n\tbackground: rgba(0, 0, 0, 0.2)\n}\n",""])},"na7+":function(t,e,n){var i=n("OCAn");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},ngXG:function(t,e,n){"use strict";var i=n("1gDp"),s={props:{reactions:{type:Object},status:{type:Object},profile:{type:Object},showBorder:{type:Boolean,default:!0},showBorderTop:{type:Boolean,default:!1},fetchState:{type:Boolean,default:!1}},components:{"context-menu":i.a},data:function(){return{authenticated:!1,tab:"vote",selectedIndex:null,refreshTimeout:void 0,activeRefreshTimeout:!1,refreshingResults:!1}},mounted:function(){var t=this;this.fetchState?axios.get("/api/v1/polls/"+this.status.poll.id).then((function(e){t.status.poll=e.data,e.data.voted&&(t.selectedIndex=e.data.own_votes[0],t.tab="voted"),t.status.poll.expired=new Date(t.status.poll.expires_at)<new Date,t.status.poll.expired&&(t.tab=t.status.poll.voted?"voted":"results")})):(this.status.poll.voted&&(this.tab="voted"),this.status.poll.expired=new Date(this.status.poll.expires_at)<new Date,this.status.poll.expired&&(this.tab=this.status.poll.voted?"voted":"results"),this.status.poll.own_votes.length&&(this.selectedIndex=this.status.poll.own_votes[0])),this.authenticated=$("body").hasClass("loggedIn")},methods:{selectOption:function(t){event.currentTarget.blur(),this.selectedIndex=t},submitVote:function(){var t=this;axios.post("/api/v1/polls/"+this.status.poll.id+"/votes",{choices:[this.selectedIndex]}).then((function(e){console.log(e.data),t.status.poll=e.data})),this.tab="voted"},viewResultsTab:function(){this.tab="results"},viewPollTab:function(){this.tab=null!=this.selectedIndex?"voted":"vote"},formatCount:function(t){return App.util.format.count(t)},statusUrl:function(t){return 1==t.local?t.url:"/i/web/post/_/"+t.account.id+"/"+t.id},profileUrl:function(t){return 1==t.local?t.account.url:"/i/web/profile/_/"+t.account.id},timestampFormat:function(t){var e=new Date(t);return e.toDateString()+" "+e.toLocaleTimeString()},shortTimestamp:function(t){return window.App.util.format.timeAgo(t)},shortTimestampAhead:function(t){return window.App.util.format.timeAhead(t)},refreshResults:function(){var t=this;this.activeRefreshTimeout=!0,this.refreshingResults=!0,axios.get("/api/v1/polls/"+this.status.poll.id).then((function(e){t.status.poll=e.data,t.status.poll.voted&&(t.selectedIndex=t.status.poll.own_votes[0],t.tab="voted",t.setActiveRefreshTimeout(),t.refreshingResults=!1)})).catch((function(e){swal("Oops!","An error occured while fetching the latest poll results. Please try again later.","error"),t.setActiveRefreshTimeout(),t.refreshingResults=!1}))},setActiveRefreshTimeout:function(){var t=this;this.refreshTimeout=setTimeout((function(){t.activeRefreshTimeout=!1}),3e4)},statusDeleted:function(t){this.$emit("status-delete",t)},ctxMenu:function(){this.$refs.contextMenu.open()},likeStatus:function(){this.$emit("likeStatus",this.status)},calculatePercentage:function(t){var e=this.status;return 0==e.poll.votes_count?0:Math.round(t.votes_count/e.poll.votes_count*100)}}},o=n("KHd+"),a=Object(o.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card shadow-none rounded-0",class:{border:t.showBorder,"border-top-0":!t.showBorderTop}},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"media"},[n("img",{staticClass:"rounded-circle box-shadow mr-2",attrs:{src:t.status.account.avatar,width:"32px",height:"32px",alt:"avatar"}}),t._v(" "),n("div",{staticClass:"media-body"},[n("div",{staticClass:"pl-2 d-flex align-items-top"},[n("a",{staticClass:"username font-weight-bold text-dark text-decoration-none text-break",attrs:{href:"#"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.status.account.acct)+"\n\t\t\t\t\t\t")]),t._v(" "),n("span",{staticClass:"px-1 text-lighter"},[t._v("\n\t\t\t\t\t\t\t·\n\t\t\t\t\t\t")]),t._v(" "),n("a",{staticClass:"font-weight-bold text-lighter",attrs:{href:t.statusUrl(t.status)}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.shortTimestamp(t.status.created_at))+"\n\t\t\t\t\t\t")]),t._v(" "),n("span",{staticClass:"d-none d-md-block px-1 text-lighter"},[t._v("\n\t\t\t\t\t\t\t·\n\t\t\t\t\t\t")]),t._v(" "),t._m(0),t._v(" "),n("span",{staticClass:"d-none d-md-block px-1 text-lighter"},[t._v("\n\t\t\t\t\t\t\t·\n\t\t\t\t\t\t")]),t._v(" "),n("span",{staticClass:"d-none d-md-block px-1 text-lighter font-weight-bold"},[t.status.poll.expired?n("span",[t._v("\n\t\t\t\t\t\t\t\tClosed\n\t\t\t\t\t\t\t")]):n("span",[t._v("\n\t\t\t\t\t\t\t\tCloses in "+t._s(t.shortTimestampAhead(t.status.poll.expires_at))+"\n\t\t\t\t\t\t\t")])]),t._v(" "),n("span",{staticClass:"text-right",staticStyle:{"flex-grow":"1"}},[n("button",{staticClass:"btn btn-link text-dark py-0",attrs:{type:"button"},on:{click:function(e){return t.ctxMenu()}}},[n("span",{staticClass:"fas fa-ellipsis-h text-lighter"}),t._v(" "),n("span",{staticClass:"sr-only"},[t._v("Post Menu")])])])]),t._v(" "),n("div",{staticClass:"pl-2"},[n("div",{staticClass:"poll py-3"},[n("div",{staticClass:"pt-2 text-break d-flex align-items-center mb-3",staticStyle:{"font-size":"17px"}},[t._m(1),t._v(" "),n("span",{staticClass:"font-weight-bold ml-3",domProps:{innerHTML:t._s(t.status.content)}})]),t._v(" "),n("div",{staticClass:"mb-2"},["vote"===t.tab?n("div",[t._l(t.status.poll.options,(function(e,i){return n("p",[n("button",{staticClass:"btn btn-block lead rounded-pill",class:[i==t.selectedIndex?"btn-primary":"btn-outline-primary"],attrs:{disabled:!t.authenticated},on:{click:function(e){return t.selectOption(i)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t\t")])])})),t._v(" "),null!=t.selectedIndex?n("p",{staticClass:"text-right"},[n("button",{staticClass:"btn btn-primary btn-sm font-weight-bold px-3",on:{click:function(e){return t.submitVote()}}},[t._v("Vote")])]):t._e()],2):"voted"===t.tab?n("div",t._l(t.status.poll.options,(function(e,i){return n("div",{staticClass:"mb-3"},[n("button",{staticClass:"btn btn-block lead rounded-pill",class:[i==t.selectedIndex?"btn-primary":"btn-outline-secondary"],attrs:{disabled:""}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"font-weight-bold"},[n("span",{staticClass:"text-muted"},[t._v(t._s(t.calculatePercentage(e))+"%")]),t._v(" "),n("span",{staticClass:"small text-lighter"},[t._v("("+t._s(e.votes_count)+" "+t._s(1==e.votes_count?"vote":"votes")+")")])])])})),0):"results"===t.tab?n("div",t._l(t.status.poll.options,(function(e,i){return n("div",{staticClass:"mb-3"},[n("button",{staticClass:"btn btn-outline-secondary btn-block lead rounded-pill",attrs:{disabled:""}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),n("div",{staticClass:"font-weight-bold"},[n("span",{staticClass:"text-muted"},[t._v(t._s(t.calculatePercentage(e))+"%")]),t._v(" "),n("span",{staticClass:"small text-lighter"},[t._v("("+t._s(e.votes_count)+" "+t._s(1==e.votes_count?"vote":"votes")+")")])])])})),0):t._e()]),t._v(" "),n("div",[n("p",{staticClass:"mb-0 small text-lighter font-weight-bold d-flex justify-content-between"},[n("span",[t._v(t._s(t.status.poll.votes_count)+" votes")]),t._v(" "),"results"!=t.tab&&t.authenticated&&!t.activeRefreshTimeout&1!=t.status.poll.expired&&t.status.poll.voted?n("a",{staticClass:"text-lighter",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.refreshResults()}}},[t._v("Refresh Results")]):t._e(),t._v(" "),"results"!=t.tab&&t.authenticated&&t.refreshingResults?n("span",{staticClass:"text-lighter"},[t._m(2)]):t._e()])]),t._v(" "),n("div",[n("span",{staticClass:"d-block d-md-none small text-lighter font-weight-bold"},[t.status.poll.expired?n("span",[t._v("\n\t\t\t\t\t\t\t\t\t\tClosed\n\t\t\t\t\t\t\t\t\t")]):n("span",[t._v("\n\t\t\t\t\t\t\t\t\t\tCloses in "+t._s(t.shortTimestampAhead(t.status.poll.expires_at))+"\n\t\t\t\t\t\t\t\t\t")])])])])])])])])]),t._v(" "),n("context-menu",{ref:"contextMenu",attrs:{status:t.status,profile:t.profile},on:{"status-delete":t.statusDeleted}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-none d-md-block px-1 text-primary font-weight-bold"},[e("i",{staticClass:"fas fa-poll-h"}),this._v(" Poll "),e("sup",{staticClass:"text-lighter"},[this._v("BETA")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"btn btn-primary px-2 py-1"},[e("i",{staticClass:"fas fa-poll-h fa-lg"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])}],!1,null,null,null);e.a=a.exports},oDnJ:function(t,e,n){"use strict";n.r(e);var i={props:["list","scope"],data:function(){return{loading:!0,show:!0,stories:{}}},mounted:function(){this.fetchStories()},methods:{fetchStories:function(){var t=this;axios.get("/api/web/stories/v1/recent").then((function(e){e.data;e.data.length?(t.stories=e.data,t.loading=!1):t.show=!1})).catch((function(e){t.loading=!1,t.$bvToast.toast("Cannot load stories. Please try again later.",{title:"Error",variant:"danger",autoHideDelay:5e3}),t.show=!1}))},showStory:function(t){var e;switch(this.scope){case"home":e="/?t=1";break;case"local":e="/?t=2";break;case"network":e="/?t=3"}window.location.href=this.stories[t].url+e},systemStory:function(){window.location.href="/i/_platform/stories/whats-new"}}},s=(n("bmA5"),n("KHd+")),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?n("div",{staticClass:"card card-body p-0 border mt-md-4 mb-md-3 shadow-none"},[t.loading?n("div",{staticClass:"w-100 h-100 d-flex align-items-center justify-content-center"},[t._m(0)]):n("div",{staticClass:"d-flex align-items-center justify-content-start scrolly"},t._l(t.stories,(function(e,i){return n("div",{staticClass:"px-3 pt-3 text-center cursor-pointer",class:{seen:e.seen},on:{click:function(e){return t.showStory(i)}}},[n("span",{staticClass:"mb-1 ring",class:[e.seen?"not-seen":"",e.local?"":"remote"]},[n("img",{staticClass:"rounded-circle border",attrs:{src:e.avatar,width:"60",height:"60",onerror:"this.onerror=null;this.src='/storage/avatars/default.png?v=2'"}})]),t._v(" "),n("p",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"small font-weight-bold text-truncate",class:{"text-lighter":e.seen},staticStyle:{"max-width":"69px"},attrs:{placement:"bottom",title:e.username}},[t._v("\n\t\t\t\t\t"+t._s(e.username)+"\n\t\t\t\t")])])})),0)]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-border spinner-border-sm text-lighter",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])}],!1,null,"c1448eda",null);e.default=o.exports},pm6S:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.card-img-top[data-v-1b12221c] {\n  border-top-left-radius: 0 !important;\n  border-top-right-radius: 0 !important;\n}\n.content-label-wrapper[data-v-1b12221c] {\n\tposition: relative;\n}\n.content-label[data-v-1b12221c] {\n\tmargin: 0;\n\tposition: absolute;\n\ttop:50%;\n\tleft:50%;\n\ttransform: translate(-50%, -50%);\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 2;\n\tbackground: rgba(0, 0, 0, 0.2)\n}\n",""])},"t+jv":function(t,e,n){"use strict";n("N0po")},tF69:function(t,e,n){var i=n("uGca");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,s);i.locals&&(t.exports=i.locals)},uGca:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.postPresenterContainer[data-v-7f94e974] {\n\tdisplay: flex;\n\talign-items: center;\n\tbackground: #fff;\n}\n.word-break[data-v-7f94e974] {\n\tword-break: break-all;\n}\n.small .custom-control-label[data-v-7f94e974] {\n\tpadding-top: 3px;\n}\n/*.reply-btn {\n\tposition: absolute;\n\tbottom: 30px;\n\tright: 20px;\n\twidth: 60px;\n\ttext-align: center;\n\tfont-size: 13px;\n\tborder-radius: 0 3px 3px 0;\n}*/\n.reply-btn[disabled][data-v-7f94e974] {\n\topacity: .3;\n\tcolor: #3897f0;\n}\n.replyModalTextarea[data-v-7f94e974] {\n\tborder: none;\n\tfont-size: 18px;\n\tresize: none;\n\twhite-space: pre-wrap;\n\toutline: none;\n}\n.has-story[data-v-7f94e974] {\n\twidth: 64px;\n\theight: 64px;\n\tborder-radius: 50%;\n\tpadding: 2px;\n\tbackground: radial-gradient(ellipse at 70% 70%, #ee583f 8%, #d92d77 42%, #bd3381 58%);\n}\n.has-story img[data-v-7f94e974] {\n\twidth: 60px;\n\theight: 60px;\n\tborder-radius: 50%;\n\tpadding: 3px;\n\tbackground: #fff;\n}\n.has-story.has-story-sm[data-v-7f94e974] {\n\twidth: 32px;\n\theight: 32px;\n\tborder-radius: 50%;\n\tpadding: 2px;\n\tbackground: radial-gradient(ellipse at 70% 70%, #ee583f 8%, #d92d77 42%, #bd3381 58%);\n}\n.has-story.has-story-sm img[data-v-7f94e974] {\n\twidth: 28px;\n\theight: 28px;\n\tborder-radius: 50%;\n\tpadding: 3px;\n\tbackground: #fff;\n}\n#ctx-reply-modal .form-control[data-v-7f94e974]:focus {\n\tborder: none;\n\toutline: 0;\n\tbox-shadow: none;\n}\n",""])},x6yo:function(t,e,n){"use strict";n.r(e);function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var o,a,r,l={data:function(){return{loading:!0,notifications:{},notificationCursor:2,notificationMaxId:0,profile:{locked:!1},followRequests:null,showRefresh:!1,attemptedRefresh:!1}},mounted:function(){var t=this;this.fetchNotifications(),setTimeout((function(){t.profile=window._sharedData.curUser,t.fetchFollowRequests()}),1500)},updated:function(){},methods:(o={fetchNotifications:function(){var t=this;axios.get("/api/pixelfed/v1/notifications?pg=true").then((function(e){var n=e.data.filter((function(t){return!("share"==t.type&&!t.status||"comment"==t.type&&!t.status||"mention"==t.type&&!t.status||"favourite"==t.type&&!t.status||"follow"==t.type&&!t.account)})),s=n.map((function(t){return t.id}));t.notificationMaxId=Math.min.apply(Math,i(s)),t.notifications=n,t.loading=!1,0!=n.length||t.attemptedRefresh||(t.showRefresh=!0)}))},infiniteNotifications:function(t){var e=this;this.notificationCursor>5?t.complete():axios.get("/api/pixelfed/v1/notifications",{params:{max_id:this.notificationMaxId}}).then((function(n){if(n.data.length){var s,o=n.data.filter((function(t){return!("share"==t.type&&!t.status||"comment"==t.type&&!t.status||"mention"==t.type&&!t.status||"favourite"==t.type&&!t.status||"follow"==t.type&&!t.account||_.find(e.notifications,{id:t.id}))})),a=o.map((function(t){return t.id}));e.notificationMaxId=Math.min.apply(Math,i(a)),(s=e.notifications).push.apply(s,i(o)),e.notificationCursor++,t.loaded()}else t.complete()}))},truncate:function(t){return t.length<=15?t:t.slice(0,15)+"..."},timeAgo:function(t){return window.App.util.format.timeAgo(t)},mentionUrl:function(t){return"/p/"+t.account.username+"/"+t.id},notificationPoll:function(){var t=this.notifications.length>5?15e3:12e4,e=this;setInterval((function(){axios.get("/api/pixelfed/v1/notifications").then((function(t){var n=t.data.filter((function(t){return!("share"==t.type||e.notificationMaxId>=t.id)}));if(n.length){var s,o=n.map((function(t){return t.id}));e.notificationMaxId=Math.max.apply(Math,i(o)),(s=e.notifications).unshift.apply(s,i(n));var a=new Audio("/static/beep.mp3");a.volume=.7,a.play(),$(".notification-card .far.fa-bell").addClass("fas text-danger").removeClass("far text-muted")}}))}),t)},refreshNotifications:function(){var t=this;axios.get("/api/pixelfed/v1/notifications").then((function(e){var n=e.data.filter((function(e){return!("share"==e.type||t.notificationMaxId>=e.id)}));if(n.length>0){var i=n.map((function(t){return t.id})),s=Math.max(i);if(s<=t.notificationMaxId)return;t.notificationMaxId=s,t.notifications=n;var o=new Audio("/static/beep.mp3");o.volume=.7,o.play()}}))},fetchFollowRequests:function(){var t=this;1==window._sharedData.curUser.locked&&axios.get("/account/follow-requests.json").then((function(e){t.followRequests=e.data}))},redirect:function(t){window.location.href=t},notificationPreview:function(t){return t.status&&t.status.hasOwnProperty("media_attachments")&&t.status.media_attachments.length?t.status.media_attachments[0].preview_url:"/storage/no-preview.png"},getProfileUrl:function(t){return 1==t.local?t.url:"/i/web/profile/_/"+t.id},getPostUrl:function(t){if(t)return t.hasOwnProperty("local")&&1!=t.local?"/i/web/post/_/"+t.account.id+"/"+t.id:t.url}},a="refreshNotifications",r=function(){this.loading=!0,this.attemptedRefresh=!0,this.fetchNotifications()},a in o?Object.defineProperty(o,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[a]=r,o)},c=n("KHd+"),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"card notification-card shadow-none border"},[t.loading?n("div",{staticClass:"card-body loader text-center",staticStyle:{height:"240px"}},[n("div",{staticClass:"spinner-border",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Loading...")])])]):t._e(),t._v(" "),!t.loading&&t.notifications.length>0?n("div",{staticClass:"card-body px-0 py-0 contents",staticStyle:{height:"240px","overflow-y":"scroll"}},[t.profile.locked?n("div",{staticClass:"media align-items-center mt-n2 px-3 py-2 border-bottom border-lighter bg-light cursor-pointer",on:{click:function(e){return t.redirect("/account/follow-requests")}}},[n("div",{staticClass:"media-body font-weight-light pt-2 small d-flex align-items-center justify-content-between"},[n("p",{staticClass:"mb-0 text-lighter"},[n("i",{staticClass:"fas fa-cog text-light"})]),t._v(" "),n("p",{staticClass:"text-center pt-1 mb-1 text-dark font-weight-bold"},[n("strong",[t._v(t._s(t.followRequests&&t.followRequests.hasOwnProperty("count")?t.followRequests.count:0))]),t._v(" Follow Requests")]),t._v(" "),n("p",{staticClass:"mb-0 text-lighter"},[n("i",{staticClass:"fas fa-chevron-right"})])])]):t._e(),t._v(" "),t._l(t.notifications,(function(e,i){return t.notifications.length>0?n("div",{staticClass:"media align-items-center px-3 py-2 border-bottom border-light"},[n("img",{staticClass:"mr-2 rounded-circle",staticStyle:{border:"1px solid #ccc"},attrs:{src:e.account.avatar,alt:"",width:"32px",height:"32px",onerror:"this.onerror=null;this.src='/storage/avatars/default.png';"}}),t._v(" "),n("div",{staticClass:"media-body font-weight-light small"},["favourite"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" liked your\n\t\t\t\t\t\t\t\t"),e.status&&e.status.hasOwnProperty("media_attachments")?n("span",[n("a",{staticClass:"font-weight-bold",attrs:{href:t.getPostUrl(e.status),id:"fvn-"+e.id}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t\t\t"),n("b-popover",{attrs:{target:"fvn-"+e.id,title:"",triggers:"hover",placement:"top",boundary:"window"}},[n("img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.notificationPreview(e),width:"100px",height:"100px"}})])],1):n("span",[n("a",{staticClass:"font-weight-bold",attrs:{href:t.getPostUrl(e.status)}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t\t")])])]):"comment"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" commented on your "),n("a",{staticClass:"font-weight-bold",attrs:{href:t.getPostUrl(e.status)}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"group:comment"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" commented on your "),n("a",{staticClass:"font-weight-bold",attrs:{href:e.group_post_url}},[t._v("group post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"story:react"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" reacted to your "),n("a",{staticClass:"font-weight-bold",attrs:{href:"/account/direct/t/"+e.account.id}},[t._v("story")]),t._v(".\n\t\t\t\t\t\t\t")])]):"story:comment"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" commented on your "),n("a",{staticClass:"font-weight-bold",attrs:{href:"/account/direct/t/"+e.account.id}},[t._v("story")]),t._v(".\n\t\t\t\t\t\t\t")])]):"mention"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" "),n("a",{staticClass:"font-weight-bold",attrs:{href:t.mentionUrl(e.status)}},[t._v("mentioned")]),t._v(" you.\n\t\t\t\t\t\t\t")])]):"follow"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" followed you.\n\t\t\t\t\t\t\t")])]):"share"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" shared your "),n("a",{staticClass:"font-weight-bold",attrs:{href:t.getPostUrl(e.status)}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"modlog"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(t.truncate(e.account.username)))]),t._v(" updated a "),n("a",{staticClass:"font-weight-bold",attrs:{href:e.modlog.url}},[t._v("modlog")]),t._v(".\n\t\t\t\t\t\t\t")])]):"tagged"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" tagged you in a "),n("a",{staticClass:"font-weight-bold",attrs:{href:e.tagged.post_url}},[t._v("post")]),t._v(".\n\t\t\t\t\t\t\t")])]):"direct"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" sent a "),n("a",{staticClass:"font-weight-bold",attrs:{href:"/account/direct/t/"+e.account.id}},[t._v("dm")]),t._v(".\n\t\t\t\t\t\t\t")])]):"group.join.approved"==e.type?n("div",[n("p",{staticClass:"my-0"},[t._v("\n\t\t\t\t\t\t\t\tYour application to join the "),n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:e.group.url,title:e.group.name}},[t._v(t._s(t.truncate(e.group.name)))]),t._v(" group was approved!\n\t\t\t\t\t\t\t")])]):"group.join.rejected"==e.type?n("div",[n("p",{staticClass:"my-0"},[t._v("\n\t\t\t\t\t\t\t\tYour application to join "),n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:e.group.url,title:e.group.name}},[t._v(t._s(t.truncate(e.group.name)))]),t._v(" was rejected.\n\t\t\t\t\t\t\t")])]):"group:invite"==e.type?n("div",[n("p",{staticClass:"my-0"},[n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:t.getProfileUrl(e.account),title:e.account.username}},[t._v(t._s(0==e.account.local?"@":"")+t._s(t.truncate(e.account.username)))]),t._v(" invited you to join "),n("a",{staticClass:"font-weight-bold text-dark word-break",attrs:{href:e.group.url+"/invite/claim",title:e.group.name}},[t._v(t._s(e.group.name))]),t._v(".\n\t\t\t\t\t\t\t")])]):n("div",[n("p",{staticClass:"my-0"},[t._v("\n\t\t\t\t\t\t\t\tWe cannot display this notification at this time.\n\t\t\t\t\t\t\t")])])]),t._v(" "),n("div",{staticClass:"small text-muted font-weight-bold",attrs:{title:e.created_at}},[t._v(t._s(t.timeAgo(e.created_at)))])]):t._e()})),t._v(" "),t.notifications.length?n("div",[n("infinite-loading",{on:{infinite:t.infiniteNotifications}},[n("div",{staticClass:"font-weight-bold",attrs:{slot:"no-results"},slot:"no-results"}),t._v(" "),n("div",{staticClass:"font-weight-bold",attrs:{slot:"no-more"},slot:"no-more"})])],1):t._e(),t._v(" "),0==t.notifications.length?n("div",{staticClass:"text-lighter text-center py-3"},[n("p",{staticClass:"mb-0"},[n("i",{staticClass:"fas fa-inbox fa-3x"})]),t._v(" "),n("p",{staticClass:"mb-0 small font-weight-bold"},[t._v("0 Notifications!")])]):t._e()],2):t._e(),t._v(" "),t.loading||t.notifications.length?t._e():n("div",{staticClass:"card-body px-0 py-0",staticStyle:{height:"240px"}},[n("div",{staticClass:"text-lighter text-center py-3"},[n("p",{staticClass:"mb-0"},[n("i",{staticClass:"fas fa-inbox fa-3x"})]),t._v(" "),n("p",{staticClass:"mb-0 small font-weight-bold"},[t._v("No notifications yet")]),t._v(" "),t.showRefresh&&!t.attemptedRefresh?n("p",{staticClass:"mt-2 small font-weight-bold text-primary cursor-pointer",on:{click:t.refreshNotifications}},[n("i",{staticClass:"fas fa-redo"}),t._v(" Refresh")]):t._e()])])])])],1)}),[],!1,null,"46d0adc6",null);e.default=u.exports},x784:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.text-lighter[data-v-1002e7e2] {\n\tcolor:#B8C2CC !important;\n}\n.modal-body[data-v-1002e7e2] {\n\tpadding: 0;\n}\n",""])},yric:function(t,e,n){"use strict";n.r(e);var i={props:["feed","status","profile","size","modal"],data:function(){return{activeSession:!1}},mounted:function(){var t=document.querySelector("body");this.activeSession=!!t.classList.contains("loggedIn")},methods:{reportUrl:function(t){return"/i/report?type="+(t.in_reply_to?"comment":"post")+"&id="+t.id},timestampFormat:function(t){var e=new Date(t);return e.toDateString()+" "+e.toLocaleTimeString()},editUrl:function(t){return t.url+"/edit"},redirect:function(t){window.location.href=t},replyUrl:function(t){return"/p/"+this.profile.username+"/"+(t.account.id==this.profile.id?t.id:t.in_reply_to_id)},mentionUrl:function(t){return"/p/"+t.account.username+"/"+t.id},statusOwner:function(t){return parseInt(t.account.id)==parseInt(this.profile.id)},deletePost:function(){this.$emit("deletePost"),$("#mt_pid_"+this.status.id).modal("hide")},hidePost:function(t){t.sensitive=!0,$("#mt_pid_"+t.id).modal("hide")},moderatePost:function(t,e,n){var i=t.account.username;switch(e){case"autocw":var s="Are you sure you want to enforce CW for "+i+" ?";swal({title:"Confirm",text:s,icon:"warning",buttons:!0,dangerMode:!0});break;case"suspend":s="Are you sure you want to suspend the account of "+i+" ?",swal({title:"Confirm",text:s,icon:"warning",buttons:!0,dangerMode:!0})}},muteProfile:function(t){0!=$("body").hasClass("loggedIn")&&axios.post("/i/mute",{type:"user",item:t.account.id}).then((function(e){swal("Success","You have successfully muted "+t.account.acct,"success")})).catch((function(t){swal("Error","Something went wrong. Please try again later.","error")}))},blockProfile:function(t){0!=$("body").hasClass("loggedIn")&&axios.post("/i/block",{type:"user",item:t.account.id}).then((function(e){swal("Success","You have successfully blocked "+t.account.acct,"success")})).catch((function(t){swal("Error","Something went wrong. Please try again later.","error")}))},statusUrl:function(t){return 1==t.local?t.url:"/i/web/post/_/"+t.account.id+"/"+t.id},profileUrl:function(t){return 1==t.local?t.account.url:"/i/web/profile/_/"+t.account.id},closeModal:function(){$("#mt_pid_"+this.status.id).modal("hide")}}},s=(n("zzgW"),n("KHd+")),o=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["true"!=t.modal?n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-link text-dark no-caret dropdown-toggle py-0",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"Post options"}},[n("span",{class:["lg"==t.size?"fas fa-ellipsis-v fa-lg text-muted":"fas fa-ellipsis-v fa-sm text-lighter"]})]),t._v(" "),n("div",{staticClass:"dropdown-menu dropdown-menu-right"},[n("a",{staticClass:"dropdown-item font-weight-bold text-decoration-none",attrs:{href:t.status.url}},[t._v("Go to post")]),t._v(" "),1==t.activeSession&&0==t.statusOwner(t.status)?n("span",[n("a",{staticClass:"dropdown-item font-weight-bold",attrs:{href:t.reportUrl(t.status)}},[t._v("Report")])]):t._e(),t._v(" "),1==t.activeSession&&1==t.statusOwner(t.status)?n("span",[n("a",{staticClass:"dropdown-item font-weight-bold text-decoration-none",on:{click:function(e){return e.preventDefault(),t.muteProfile(t.status)}}},[t._v("Mute Profile")]),t._v(" "),n("a",{staticClass:"dropdown-item font-weight-bold text-decoration-none",on:{click:function(e){return e.preventDefault(),t.blockProfile(t.status)}}},[t._v("Block Profile")])]):t._e(),t._v(" "),1==t.activeSession&&1==t.profile.is_admin?n("span",[n("div",{staticClass:"dropdown-divider"}),t._v(" "),n("a",{staticClass:"dropdown-item font-weight-bold text-danger text-decoration-none",on:{click:function(e){return t.deletePost(t.status)}}},[t._v("Delete")]),t._v(" "),n("div",{staticClass:"dropdown-divider"}),t._v(" "),n("h6",{staticClass:"dropdown-header"},[t._v("Mod Tools")]),t._v(" "),n("a",{staticClass:"dropdown-item font-weight-bold text-decoration-none",on:{click:function(e){return t.moderatePost(t.status,"autocw")}}},[n("p",{staticClass:"mb-0"},[t._v("Enforce CW")]),t._v(" "),t._m(0)]),t._v(" "),n("a",{staticClass:"dropdown-item font-weight-bold text-decoration-none",on:{click:function(e){return t.moderatePost(t.status,"noautolink")}}},[n("p",{staticClass:"mb-0"},[t._v("No Autolinking")]),t._v(" "),t._m(1)]),t._v(" "),n("a",{staticClass:"dropdown-item font-weight-bold text-decoration-none",on:{click:function(e){return t.moderatePost(t.status,"unlisted")}}},[n("p",{staticClass:"mb-0"},[t._v("Unlisted Posts")]),t._v(" "),t._m(2)]),t._v(" "),n("a",{staticClass:"dropdown-item font-weight-bold text-decoration-none",on:{click:function(e){return t.moderatePost(t.status,"disable")}}},[n("p",{staticClass:"mb-0"},[t._v("Disable Account")]),t._v(" "),t._m(3)]),t._v(" "),n("a",{staticClass:"dropdown-item font-weight-bold text-decoration-none",on:{click:function(e){return t.moderatePost(t.status,"suspend")}}},[n("p",{staticClass:"mb-0"},[t._v("Suspend Account")]),t._v(" "),t._m(4)])]):t._e()])]):t._e(),t._v(" "),"true"==t.modal?n("div",[n("span",{attrs:{"data-toggle":"modal","data-target":"#mt_pid_"+t.status.id}},[n("span",{class:["lg"==t.size?"fas fa-ellipsis-v fa-lg text-muted":"fas fa-ellipsis-v fa-sm text-lighter"]})]),t._v(" "),n("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog",id:"mt_pid_"+t.status.id}},[n("div",{staticClass:"modal-dialog modal-sm modal-dialog-centered",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-body text-center"},[n("div",{staticClass:"list-group"},[n("a",{staticClass:"list-group-item text-dark text-decoration-none",attrs:{href:t.statusUrl(t.status)}},[t._v("Go to post")]),t._v(" "),n("a",{staticClass:"list-group-item text-dark text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.hidePost(t.status)}}},[t._v("Hide")]),t._v(" "),1!=t.activeSession||t.statusOwner(t.status)?t._e():n("a",{staticClass:"list-group-item text-danger font-weight-bold text-decoration-none",attrs:{href:t.reportUrl(t.status)}},[t._v("Report")]),t._v(" "),1==t.activeSession&&1==t.statusOwner(t.status)||1==t.profile.is_admin?n("div",{staticClass:"list-group-item text-danger font-weight-bold cursor-pointer",on:{click:function(e){return e.preventDefault(),t.deletePost.apply(null,arguments)}}},[t._v("Delete")]):t._e(),t._v(" "),n("a",{staticClass:"list-group-item text-lighter text-decoration-none",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[t._v("Close")])])])])])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"mb-0  small text-muted"},[this._v("Adds a CW to every post "),e("br"),this._v(" made by this account.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"mb-0 small text-muted"},[this._v("Do not transform mentions, "),e("br"),this._v(" hashtags or urls into HTML.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"mb-0 small text-muted"},[this._v("Removes account from "),e("br"),this._v(" public/network timelines.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"mb-0 small text-muted"},[this._v("Temporarily disable account "),e("br"),this._v(" until next time user log in.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"mb-0 small text-muted"},[this._v("This prevents any new interactions, "),e("br"),this._v(" without deleting existing data.")])}],!1,null,"1002e7e2",null);e.default=o.exports},zzgW:function(t,e,n){"use strict";n("iKvg")}},[[6,0]]]);